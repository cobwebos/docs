---
title: SQL 漏洞评估 - Azure SQL 数据库 | Microsoft Docs
description: 了解如何在 SQL 数据库上配置 SQL 漏洞评估，并解释评估报告。
services: sql-database
author: ronitr
manager: craigg
ms.service: sql-database
ms.topic: conceptual
ms.date: 05/17/2018
ms.author: ronitr
ms.reviewer: carlrab
ms.openlocfilehash: c415dd2a923403d8205034eb707c1c1a333bf335
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/01/2018
ms.locfileid: "34650020"
---
# <a name="sql-vulnerability-assessment"></a>SQL 漏洞评估

SQL 漏洞评估是一项易于配置的服务，可以发现、跟踪并帮助修正潜在的数据库漏洞。 使用它来主动提升数据库安全性。 

漏洞评估包含在 [SQL 高级威胁防护](sql-advanced-threat-protection.md) (ATP) 产品中，该产品是高级 SQL 安全功能统一软件包。 可通过中心 SQL ATP 门户访问和管理漏洞评估。

## <a name="what-is-vulnerability-assessment"></a>什么是漏洞评估？
SQL 漏洞评估 (VA) 是一项可直观查看安全状态的服务，包括解决安全问题的可操作步骤，并可增强数据库安全性。 它可以帮助你：  
- 满足需要数据库扫描报告的符合性要求。  
- 满足数据隐私标准。  
- 监视其中难以追踪变化的动态数据库环境。  

VA 是 Azure SQL 数据库服务内置的扫描服务。 该服务采用标记安全漏洞的规则知识库，并突出显示与最佳做法的偏差，例如错误配置、过多权限和未受保护的敏感数据。 这些规则基于 Microsoft 的最佳做法，并专注于对数据库及其重要数据有最大风险的安全问题。 其中涵盖数据库级别的问题以及服务器级别的安全问题，如服务器防火墙设置和服务器级别的权限。 此外，这些规则也代表了各种监管机构的诸多要求，以满足其符合性标准。  

扫描结果包括解决每个问题的可操作步骤，并在适用情况下提供自定义修正脚本。 设置权限配置、功能配置和数据库设置可接受的基准，以此针对环境自定义评估报告。   

## <a name="implementing-va"></a>实现 VA  
以下步骤可在 SQL 数据库上实现 VA。  

## <a name="1-run-a-scan"></a>1.运行扫描  
导航到 Azure SQL 数据库窗格“安全”标题下的“高级威胁防护”，开始使用 VA。 单击启用“高级威胁防护”，然后单击“漏洞评估”卡，随后会自动打开“漏洞评估”设置卡。 

首先配置一个存储帐户，扫描结果将存储在其中。 有关存储帐户的详细信息，请参阅[关于 Azure 存储帐户](../storage/common/storage-create-storage-account.md)。 配置存储后，单击“扫描”，扫描数据库中的漏洞。
  
![扫描数据库](./media/sql-vulnerability-assessment/pp_va_initialize.png)  
  > [!NOTE]   
  > 扫描是轻型且安全的。 这需要几秒钟时间来运行，并且是完全只读的。 该操作不会对数据库进行任何更改。  

## <a name="2-view-the-report"></a>2.查看报告  
扫描完成后，扫描报告将自动显示在 Azure 门户中， 其中概要列出了安全状态，发现的问题个数及其各自的严重性。 结果中包括偏离最佳做法的警告，以及与安全相关的设置的屏幕截图，例如数据库主体和角色及其相关权限。扫描报告还会提供数据库中发现的敏感数据的映射，并建议使用[数据发现和分类](sql-database-data-discovery-and-classification.md)对该数据进行分类。 
 
![查看报告](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

## <a name="3-analyze-the-results-and-resolve-issues"></a>3.分析结果并解决问题  
查看结果，并确定报告中的哪些结果是环境中真实存在的安全问题。 深入查看每个失败的结果，了解该结果的影响，以及每个安全检查失败的原因。 使用报告提供的可操作修正信息来解决问题。  

![分析报告](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)    

## <a name="4-set-your-baseline"></a>4.设置基线  
在查看评估结果时，可将特定结果标记为环境中可接受的基线。 基线实质上是自定义结果的报告方式。 匹配基线的结果被认为是在随后的扫描中进行传递。 建立基线安全状态后，VA 只会报告与基线的偏差，这样你可以专注于处理相关问题。  

![设置基线](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

## <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5.运行新扫描以查看自定义跟踪报告  
完成规则基线设置后，运行新的扫描以查看自定义报告。 VA 现在仅报告与批准的基线状态偏离的安全问题。 
 
![查看自定义报告](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

VA 现在可用于监视数据库是否始终保持高级别的安全性，并且是否满足组织策略。 如果需要符合性报告，VA 报告可有助于促进符合性流程。  

## <a name="6-set-up-periodic-recurring-scans"></a>6.设置定期扫描
导航到“漏洞评估”设置，打开“定期扫描”。 此配置会使漏洞评估每周自动运行一次数据库扫描。 扫描结果摘要会发送到你提供的电子邮件地址。

![查看自定义报告](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

## <a name="7---export-an-assessment-report"></a>7. 导出评估报告
单击“导出扫描结果”，创建可供下载的扫描结果 Excel 报表。 此报表包含显示评估摘要的摘要选项卡，其中包括所有失败的检查。 报表中还包括一个“结果”选项，其中包含全部扫描结果，包括运行的所有检查以及每个检查的详细结果。 

## <a name="8---view-scan-history"></a>8. 查看扫描历史记录
单击 VA 窗格中的“扫描历史记录”，查看之前此数据库上运行的所有扫描。 选择列表中某个特定扫描，查看该扫描的详细结果。

VA 现在可用于监视数据库是否始终保持高级别的安全性，并且是否满足组织策略。 如果需要符合性报告，VA 报告可有助于促进符合性流程。

## <a name="next-steps"></a>后续步骤  

- 详细了解 [SQL 高级威胁防护](sql-advanced-threat-protection.md)
- 详细了解[数据发现和分类](sql-database-data-discovery-and-classification.md)
