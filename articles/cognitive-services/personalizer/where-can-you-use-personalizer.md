---
title: 在何处以及如何使用-Personalizer
description: 在应用程序能够选择要显示的正确项、操作或产品的任何场合下，都可以应用个性化体验创建服务，以改善体验，实现更好的业务成果，或提高工作效率。
ms.topic: conceptual
ms.date: 02/18/2020
ms.openlocfilehash: 63e66315898242beb5da59927e8d506e6f2cff78
ms.sourcegitcommit: 7b25c9981b52c385af77feb022825c1be6ff55bf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/13/2020
ms.locfileid: "79219320"
---
# <a name="where-and-how-to-use-personalizer"></a>在何处以及如何使用 Personalizer

在应用程序需要选择要显示的正确操作（内容）的任何情况下使用 Personalizer，以便更好地体验、获得更好的业务成果或提高工作效率。

Personalizer 使用机器学习来选择要显示用户的操作（内容）。 所做的选择根据发送到服务的数据数量、质量和分布而有很大的不同。

## <a name="example-use-cases-for-personalizer"></a>个性化体验创建服务的用例

* **意向说明 & 歧义消除**：通过提供个性化的选项，帮助用户更好地体验其意图。
* 菜单 & 选项的**默认建议**：使机器人在第一步中建议最可能的项，而不是呈现 impersonal 菜单或替代项列表。
* **机器人特征 & 声调**：对于可能会改变色调、详细程度和写作风格的 bot，请考虑改变这些特征。
* **通知 & 警报内容**：确定要用于警报的文本，以便为用户提供更多的信息。
* **通知 & 警报计时**：对何时将通知发送给用户进行个性化学习，以便更好地进行沟通。


## <a name="expectations-required-to-use-personalizer"></a>使用 Personalizer 所需的期望

在满足或可以实现以下准则的情况下，你可以应用 Personalizer。

|准则|说明|
|--|--|
|业务目标|为应用程序制定了业务目标或可用性目标。|
|内容|在应用程序中做出有关要向用户显示哪些数据的上下文决策可以改善该目标。|
|内容数量|对于每个调用，你的操作少于50个。|
|聚合数据|可以并且应该从集体用户行为和总体奖励评分中学习最佳选择。|
|道德使用|个性化机器学习的使用遵循[负责使用准则](ethics-responsible-use.md)和选择的选项。
|最佳单一选项|上下文决策可以表达为基于一组有限的选项对最佳选择（操作）进行排名。|
|评分结果|对于应用程序而言，排名选择的工作方式可以通过测量用户行为的某些方面来确定，并将其表示为 _[奖励分数](concept-rewards.md)_ 。|
|相关计时|奖励评分不会引入过多的混淆或外部因素。 试验持续时间足够短，以便在奖励评分仍然相关的情况下可对其进行计算。|
|足够的上下文功能|你可以将排名的上下文表示为至少具有5个[功能](concepts-features.md)的列表，你认为这将有助于做出正确的选择，并且不包括用户特定的标识信息。|
|足够的操作功能|你已获得有关每个内容选项的信息，即_操作_ - 至少包含 5 个[功能](concepts-features.md)的列表，你认为这些特征有助于个性化体验创建服务做出正确的选择。|
|每日数据|如果问题随时变化（例如新闻或时装的偏向），有足够的事件建立在最佳个性化的基础之上。 个性化体验创建服务可适应现实世界的不断变化，但如果未提供足够的事件和数据用于发现和解决新的模式，则结果不会是最佳的。 应选择发生频率够高的用例。 考虑查找每日至少发生 500 次的用例。|
|历史数据|应用程序可将数据保留足够长的时间，以累积至少 100,000 次交互的历史记录。 这允许 Personalizer 收集足够的数据来执行脱机评估和策略优化。|

**不要使用 Personalizer** ，因为个性化的行为不能跨所有用户发现。 例如，使用个性化体验创建服务从包含 20 个可能菜单项的列表中推荐最合适的披萨是有用的做法，但是，在幼儿园需要帮助时，确定要呼叫用户联系人列表中的哪个联系人（例如“奶奶”）对于用户群而言并不是一个适合个性化的用例。

## <a name="how-to-use-personalizer-in-a-web-application"></a>如何在 Web 应用程序中使用个性化体验创建服务

向 web 应用程序添加学习循环包括：

* 确定要个性化的体验、现有的操作和特征、要使用的上下文特征，以及要设置的奖励。
* 在应用程序中添加对个性化 SDK 的引用。
* 准备好个性化时，调用排名 API。
* 存储 eventId。 稍后要使用奖励 API 发送奖励。
1. 确保用户已看到你的个性化页面后，针对事件调用“激活”。
1. 等待用户选择已排名的内容。
1. 调用奖励 API 来指定排名 API 的输出准确性。

## <a name="how-to-use-personalizer-with-a-chat-bot"></a>如何在聊天机器人中使用个性化体验创建服务

本示例演示如何使用个性化做出默认建议，而不是每次向用户发送一系列的菜单或选项。

* 获取本示例的[代码](https://github.com/Azure-Samples/cognitive-services-personalizer-samples/tree/master/samples/ChatbotExample)。
* 设置机器人解决方案。 确保发布 LUIS 应用程序。
* 管理机器人的排名和奖励 API 调用。
    * 添加用于管理 LUIS 意向处理的代码。 如果返回了 **None** 作为首要意向，或者首要意向评分低于业务逻辑阈值，请将意向列表发送到个性化体验创建服务以便为意向排名。
    * 以可选择的链接形式向用户显示意向列表，其中的第一个意向是排名 API 响应中排名最靠前的意向。
    * 捕获用户的选择并在奖励 API 调用中发送此信息。

### <a name="recommended-bot-patterns"></a>建议的机器人模式

* 每当需要消除歧义时，都发出个性化体验创建服务排名 API 调用，而不要缓存每个用户的结果。 某个人的意向消除歧义结果可能会在一段时间后有变化，允许排名 API 探索差异可以加速总体学习过程。
* 选择许多用户共有的交互，以获得足够的可个性化数据。 例如，在只有少量用户访问的聊天图中，使用引导性的问题可能比稍微深入的澄清更合适。
* 使用排名 API 调用来实现“第一条建议适当”聊天，问用户“你想要 X 吗？” 或“你是指 X 吗？” 而用户只需确认；不要向用户提供他们必须从菜单中选择的选项。 例如，用户： "我想要定购一个咖啡的" 机器人： "是否为 double espresso？"。 这样，奖励信号也很明确，因为它与一条建议直接相关。

## <a name="how-to-use-personalizer-with-a-recommendation-solution"></a>如何在推荐解决方案中使用个性化体验创建服务

许多公司使用推荐引擎、市场营销活动工具、受众细分和聚类、协作筛选和其他方法来向客户推荐大型目录中的产品。

[Microsoft 推荐器 GitHub 存储库](https://github.com/Microsoft/Recommenders)提供了有关生成 Jupyter Notebook 形式的推荐系统的示例和最佳做法。 其中提供了有关为许多常见方案（包括 xDeepFM、SAR、ALS、RBM、DKN）准备数据、生成模型、评估、优化和操作化推荐引擎的可行示例。

个性化体验创建服务可以使用推荐引擎（如果存在）。

* 推荐引擎采用大量的项（例如 500,000 个），并从数百或数千个选项中推荐某个子集（例如前 20 个）。
* 个性化体验创建服务采用少量的操作（但这些操作包含有关自身的大量信息），并根据给定的丰富上下文为操作排名；而大多数推荐引擎只使用有关用户、产品及其交互的少量属性。
* 个性化体验创建服务旨在自主探索用户在所有时间的偏向，这可以产生更好的结果，其中的内容会快速变化，例如新闻、直播活动、实时社区内容、每日更新的内容或季节性内容。

一种常见用途是采用推荐引擎的输出（例如，特定客户的前 20 个产品）并将其用作个性化体验创建服务的输入操作。

## <a name="adding-content-safeguards-to-your-application"></a>将内容保护措施添加到应用程序

如果应用程序允许向用户显示差别很大的内容，而其中的某些内容对于某些用户而言不安全或者不妥，则你应该提前确保采用适当的保护措施，以防用户看到不可接受的内容。 实施保护措施的最佳模式是：
    * 获取要排名的操作列表。
    * 筛选出对受众不可行的操作。
    * 仅为可行的操作排名。
    * 向用户显示排名最高的操作。

在某些体系结构中，可能很难按上述顺序实施保护措施。 在这种情况下，有一种方法可以在排名后实施保护措施，但需要进行一项设置，这样就不会使用在防护范围之外的操作来训练 Personalizer 模型。

* 在停用学习的情况下获取要排名的操作列表。
* 为操作排名。
* 检查排名最高的操作是否可行。
    * 如果排名最高的操作可行，则激活此排名的学习，然后向用户显示。
    * 如果排名最高的操作不可行，请不要激活此排名的学习，并通过自己的逻辑或替代的方法决定要向用户显示哪些内容。 即使使用排名第二的选项，也不要激活此排名的学习。


## <a name="next-steps"></a>后续步骤

[道德和负责使用](ethics-responsible-use.md)。