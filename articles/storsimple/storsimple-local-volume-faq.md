---
title: "StorSimple 本地固定卷的常见问题 | Microsoft 文档"
description: "提供有关 StorSimple 本地固定卷常见问题的解答。"
services: storsimple
documentationcenter: NA
author: manuaery
manager: syadav
editor: 
ms.assetid: 7a2f4b1a-4ac9-4ce1-9359-bd40a9cbbb5d
ms.service: storsimple
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/11/2017
ms.author: manuaery
ms.openlocfilehash: 22eb95bf0e3a20893acbb860ad10cfe6a3bcf088
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/11/2017
---
# <a name="storsimple-locally-pinned-volumes-frequently-asked-questions-faq"></a>StorSimple 本地固定卷：常见问题 (FAQ)
## <a name="overview"></a>概述
下面是在创建 StorSimple 本地固定卷、将分层卷转换为本地固定卷（或反之），或备份与还原本地固定卷时可能遇到的问题及其解答。

问题和解答分为以下几个类别：

* 创建本地固定卷
* 备份本地固定卷
* 将分层卷转换为本地固定卷
* 还原本地固定卷
* 故障转移本地固定卷

## <a name="questions-about-creating-a-locally-pinned-volume"></a>有关创建本地固定卷的问题
**问：** 在 8000 系列设备上可以创建的本地固定卷的大小上限是什么？

**答：**在运行 StorSimple 8000 系列 Update 3.0 的设备上可以预配高达 8.5 TB 的本地固定卷，或者在 8100 设备上预配高达 200 TB 的分层卷。 8600 设备更大，可以预配高达 22.5 TB 的本地固定卷，预配高达 500 TB 的固定卷。    
在运行 StorSimple 8000 系列 Update 2.x 的设备上可以预配高达 8 TB 的本地固定卷，或者在 8100 设备上预配高达 200 TB 的分层卷。 在更大的 8600 设备上，可以预配高达 20 TB 的本地固定卷，或者是高达 500 TB 的分层卷。   

**问：** 我最近将 8100 设备升级到 Update 2.0，在尝试创建本地固定卷时，可用大小上限只有 6 TB 而不是 8 TB。 为何无法创建 8 TB 的卷？

**答：**如果设备运行的是 Update 2.0，则可以预配高达 8 TB 的本地固定卷，或者在 8100 设备上预配高达 200 TB 的分层卷。 如果设备中已有分层卷，可用于创建本地固定卷的空间将相应地低于此最大限制。 举例来说，如果已在 8100 设备上预配 100 TB 的分层卷（这是分层容量的一半），则可以在 8100 设备上创建的本地卷大小上限缩减为 4 TB（大约是本地固定卷容量上限的一半）。

由于设备上的某些本地空间用于托管分层卷的工作集，因此如果设备有分层卷，可用于创建本地固定卷的空间就会减少。 相反，创建本地固定卷也会相应减少分层卷可用的空间。 下表汇总了创建本地固定卷时，8100 和 8600 设备上可用的分层容量。

####<a name="update-30"></a>Update 3.0 
| 本地固定卷的预配容量 | 可为分层卷预配的容量 - 8100 | 可为分层卷预配的容量 - 8600 |
| --- | --- | --- |
| 0 |200 TB |500 TB |
| 1 TB |176.5 TB |477.8 TB |
| 4 TB |105.9 TB |411.1 TB |
| 8.5 TB |0 TB |311.1 TB |
| 10 TB |不可用 |277.8 TB |
| 15 TB |不可用 |166.7 TB |
| 22.5 TB |不可用 |0 TB |

####<a name="update-2x"></a>Update 2.x  
 | 本地固定卷的预配容量 | 可为分层卷预配的容量 - 8100 | 可为分层卷预配的容量 - 8600 |  
 | --- | --- | --- |  
 | 0 |200 TB |500 TB |  
 | 1 TB |25 TB |475 TB |  
 | 4 TB |100 TB |400 TB |  
 | 8 TB |0 TB |300 TB |  
 | 10 TB |不可用 |250 TB |  
 | 15 TB |不可用 |125 TB |  
 | 20 TB |不可用 |0 TB |   

**问：** 为何创建本地固定卷是长时间运行的操作？ 

**答：** 本地固定卷是丰富预配的。 为了在设备的本地层上创建空间，现有分层卷中的某些数据可能在预配过程中推送到云。 此外，由于此过程取决于正在预配的卷大小、设备上的现有数据以及云的可用带宽，创建本地卷所需的时间可能要好几个小时。

**问：** 创建一个本地固定卷需要多长时间？

**答：** 由于本地固定卷是丰富预配的，分层卷中的某些现有数据可能在预配过程中被推送到云。 因此，创建本地卷所需的时间取决于多种因素，包括卷大小、设备上的数据以及可用的带宽。 在没有卷的全新安装的设备上，创建本地固定卷的时间大约是每 TB 数据需要 10 分钟。 但是，根据所述的因素，在使用中的设备上创建本地卷可能需要几个小时。

**问：** 我想要创建本地固定卷。 是否有可供参考的最佳实践？

**答：** 本地固定卷适合用于随时需要数据本地保证且对云延迟很敏感的工作负荷。 在考虑对任何工作负荷使用本地卷时，请特别注意以下几点：

* 本地固定卷是丰富预配的，创建本地卷会影响分层卷的可用空间。 因此，建议一开始使用较小的卷，随着存储要求的增大扩展这些卷。
* 预配本地卷是长时间运行的操作，可能涉及将现有数据从分层卷推送到云。 因此，这些卷的性能可能会下降。
* 预配本地卷是一项耗时的操作。 实际所需的时间取决于多种因素：正在预配的卷大小、设备上的数据，以及可用的带宽。 如果尚未将现有的卷备份到云，则创建卷时速度较慢。 建议在预配本地卷之前，创建现有卷的云快照。
* 可将现有的分层卷转换为本地固定卷，这种转换涉及到在设备上为最终本地固定卷预配空间（此外，还要从云中关闭分层数据，如果有）。 这同样是一项长时间运行的操作，具体时间取决于上述因素。 我们建议在转换前备份现有卷，因为如果不备份现有卷，此过程将变得更慢。 设备也可能在此过程中出现性能下降。

有关如何[创建本地固定卷](storsimple-manage-volumes-u2.md#add-a-volume)的详细信息

**问：** 是否可以同时创建多个本地固定卷？

**答：** 可以，但所有本地固定卷的创建和扩展作业将按顺序处理。

本地固定卷是丰富预配的，需要在设备上创建本地空间（可能导致分层卷中的现有数据在预配过程中推送到云）。 因此，如果某个预配作业正在进行，其他本地卷创建作业将排入队列，直到该作业完成为止。

同样，如果正在扩展现有的本地卷或将分层卷转换为本地固定卷，则创建新本地固定卷的作业将排入队列，直到上一个作业完成为止。 扩展本地固定卷的大小涉及到扩展该卷的现有本地空间。 从分层卷转换为本地固定卷还涉及到为最终的本地固定卷创建本地空间。 在这两项操作中，创建或扩展本地空间都是长时间运行的作业。

可以在 Azure StorSimple Manager 服务的“作业”页中查看这些作业。 系统将持续更新当前正在积极处理的作业，反映空间预配的进度。 剩余的本地固定卷作业标记为正在运行，但其进度会停止，系统根据排队顺序选择作业。

**问：** 我删除了一个本地固定卷。 尝试创建新卷时，为何可用空间中未反映回收的空间？ 

**答：** 如果删除本地固定卷，可能不会立即更新新卷的可用空间。 StorSimple Manager 服务大约每隔一小时更新本地可用空间。 建议在一个小时后尝试创建新卷。

**问：** 云设备是否支持本地固定卷？

**答：** 云设备（8010 和 8020 设备以前称为 StorSimple 虚拟设备）不支持本地固定卷。

**问：** 是否可以使用 Azure PowerShell cmdlet 创建和管理本地固定卷？ 

**答：** 无法通过 Azure PowerShell cmdlet 创建本地固定卷（通过 Azure PowerShell 创建的任何卷都是分层卷）。 另外，建议不要使用 Azure PowerShell cmdlet 来修改本地固定卷的任何属性，否则，在将卷类型修改为分层卷时可能会受到负面影响。

## <a name="questions-about-backing-up-a-locally-pinned-volume"></a>有关备份本地固定卷的问题
**问：** 是否支持本地固定卷的本地快照？

**答：** 是的，可以创建本地固定卷的本地快照。 但是，强烈建议使用云快照定期备份本地固定卷，确保数据在偶发性的灾难中受到保护。

**问：** 在管理本地固定卷的本地快照方面，们能否提供任何指导？

**答：** 在本地固定卷中频繁创建本地快照和数据频繁进出可能导致设备上的本地空间很快耗尽，并导致将分层卷中的数据推送到云中。 因此建议尽可能减少本地快照数目。

**问：** 警报指出本地固定卷的本地快照可能已失效。 为何发生这种情况？

**答：** 在本地固定卷中频繁创建本地快照和数据频繁进出可能导致设备上的本地空间很快耗尽。 如果重度使用设备的本地层，长时间的云服务中断可能导致设备中填满数据，卷中传入的写入可能导致快照失效（因为空间不足，无法更新快照，使其引用已覆盖的旧数据块）。 在这种情况下，可继续向卷写入，但本地快照可能失效。 对现有的云快照没有影响。

该警报就是通知你可能会发生这种情况，请务必通过以下方式及时解决：查看本地快照计划，减少创建本地快照的频率，或删除不再需要的旧本地快照。

如果本地快照失效，会收到信息警报，告知特定备份策略的本地快照已失效，此外还会提供已失效本地快照的时间戳列表。 这些快照会自动删除，不再可以通过 Azure 经典门户的“备份目录”页查看。

## <a name="questions-about-converting-a-tiered-volume-to-a-locally-pinned-volume"></a>有关将分层卷转换为本地固定卷的问题
**问：** 将分层卷转换为本地固定卷时，发现设备的速度很慢。 为何会发生这种情况？ 

**答：** 转换过程包括两个步骤： 

1. 在设备上为要转换的本地固定卷预配空间。
2. 从云下载所有分层数据以提供本地保证。

这两个步骤都是长时间运行的操作，具体时间取决于要转换的卷大小、设备上的数据，以及可用的带宽。 由于现有分层卷的某些数据可能在预配过程中溢出到云中，设备可能在这段时间出现性能下降。 此外，在以下情况下，转换过程也会变慢：

* 现有卷尚未备份到云中；因此建议在开始转换之前先备份卷。
* 已应用带宽限制策略，这可能限制了云的可用带宽；因此，建议与云建立 40 Mbps 或更高的专用连接。
* 由于上述多种因素，转换过程可能需要几个小时；建议在非高峰时间或在周末执行此操作，以免影响最终使用者。

有关如何[将分层卷转换为本地固定卷](storsimple-manage-volumes-u2.md#change-the-volume-type)的详细信息

**问：** 是否可以取消卷转换操作？

**答：** 不可以，转换操作一旦启动便无法取消。 如前一个问题中所述，请注意在此过程中可能遇到的潜在性能问题，规划转换时请遵循上面所述的最佳实践。

**问：** 卷中的哪些情况会导致转换操作失败？

**答：** 卷转换可能因为云连接问题而失败。 从云关闭分层数据的尝试连续失败后，设备最终可能会停止转换过程。 在这种情况下，卷类型仍为转换前的源卷，并且：

* 将引发关键警报，告知卷转换失败。 [本地固定卷相关警报](storsimple-manage-alerts.md#locally-pinned-volume-alerts)的详细信息
* 如果要将分层卷转换为本地固定卷，该卷将继续展示分层卷的属性，因为数据可能仍然位于云中。 建议解决连接问题，并重试转换操作。
* 同样，将某个本地固定卷转换为分层卷失败时，尽管该卷标记为本地固定卷，但其现在充当分层卷（因为数据可能已溢出到云中）。 不过，它会继续占用设备本地层上的空间。 此空间不可用于其他本地固定卷。 建议重试此操作，确保卷转换完成，并且可以回收设备上的本地空间。

## <a name="questions-about-restoring-a-locally-pinned-volume"></a>有关还原本地固定卷的问题
**问：** 本地固定卷是否可以即时还原？

**答：** 是，本地固定卷可即时还原。 在还原操作过程中，一旦从云中提取卷的元数据信息，卷就会联机并可供主机访问。 但是，只有在从云中下载所有数据之后，才提供卷数据的本地保证，这些卷的性能可能在还原期间下降。

**问：** 还原一个本地固定卷需要多长时间？

**答：** 从云中检索卷元数据信息后，本地固定卷将立即还原并联机，卷数据继续在后台下载。 还原操作的后半部分（取回卷数据的本地保证）是长时间运行的操作，所有数据可能需要几个小时才能回到本地。 完成该操作所需的时间同样取决于多种因素，例如正在还原的卷大小和可用的带宽。 如果正在还原的原始卷已被删除，则还原操作期间将花费额外的时间在设备上创建本地空间。

**问：** 我需要将现有的本地固定卷还原到旧快照（卷分层时创建的快照）。 在此情况下，卷是否会还原为分层卷？

**答：** 不会，卷将还原为本地固定卷。 尽管快照的日期可回溯到卷分层的时间，但是在还原现有卷时，StorSimple 始终使用磁盘上的当前卷类型。

**问：** 我最近扩展了本地固定卷，但现在需要将数据还原到卷大小较小时的某个时间。 还原操作是否会调整当前卷的大小，我是否需要在还原完成后扩展卷的大小？

**答：** 是的，还原操作会调整卷的大小，需要在还原完成后扩展卷的大小。

**问：** 是否可以在还原期间更改卷的类型？

**答：**无法在还原期间更改卷类型。

* 已删除的卷还原为快照中存储的类型。
* 无论快照中存储的类型为何，卷都根据其当前类型还原（请参考前两个问题）。

**问：** 我需要还原本地固定卷，但选择了时间点不正确的快照。 是否可以取消当前的还原操作？

**答：** 是的，可以取消正在进行的还原操作。 卷状态将回滚到开始还原时的状态。 但是，在还原过程中对卷所做的任何写入会丢失。

**问：** 我已开始在其中一个本地固定卷上执行还原操作，但在积压工作目录中看到一个我未曾创建过的快照。 它有什么作用？

**答：** 这是在还原操作前创建的临时快照，在还原被取消或失败时可用于回滚。 请不要删除此快照；还原完成后系统会自动将它删除。 如果还原作业仅具有本地固定卷或混合了本地固定卷与分层卷，则可能发生此问题。 如果还原作业仅包含分层卷，不会发生此问题。

**问：** 是否可以克隆本地固定卷？

**答：** 可以。 但是，默认情况下，本地固定卷将克隆为分层卷。 有关如何[克隆本地固定卷](storsimple-clone-volume-u2.md)的详细信息

## <a name="questions-about-failing-over-a-locally-pinned-volume"></a>有关故障转移本地固定卷的问题
**问：** 我需要将设备故障转移到另一个物理设备。 本地固定卷将作为本地固定还是分层卷故障转移？

**答：** 根据目标设备的软件版本，本地固定卷将按以下形式故障转移：

* 如果目标设备运行 StorSimple 8000 系列 Update 2，则采用本地固定卷形式
* 如果目标设备运行 StorSimple 8000 系列 Update 1.x，则采用分层卷形式
* 如果目标设备为云设备且软件版本为 Update 2 或 Update 1.x，则采用分层卷形式

有关[对跨版本地固定卷进行故障转移和灾难恢复](storsimple-device-failover-disaster-recovery.md#device-failover-across-software-versions)的详细信息

**问：** 本地固定卷在灾难恢复 (DR) 期间是否即时还原？

**答：** 是，本地固定卷在故障转移期间可即时还原。 在故障转移操作过程中，一旦从云中提取卷的元数据信息，卷就会在目标设备上联机并可供主机访问。 同时，卷数据继续在后台下载，这些卷的性能可能在故障转移期间下降。

**问：** 完成故障转移作业后，如何跟踪目标设备上本地固定卷的还原进度？

**答：** 在故障转移操作期间，一旦故障转移集中的所有卷都已即时还原并在目标设备联机，故障转移作业就会标记为已完成。 这包括可能已故障转移的本地固定卷；但是，只有在下载卷的所有数据后，才能获得数据的本地保证。 可以监视在故障转移过程中创建的相应还原作业，跟踪已故障转移的每个本地固定卷的进度。 其中的每个还原作业只针对本地固定卷创建。

**问：** 是否可以在故障转移期间更改卷的类型？

**答：** 无法在故障转移期间更改卷类型。 如果故障转移到另一个正在运行 StorSimple 8000 系列 Update 2 的物理设备，卷会根据快照中存储的卷类型进行故障转移。 故障转移到其他设备版本时，请参考上面有关故障转移后的卷类型的问题。

**问：** 是否可以将包含本地固定卷的卷容器故障转移到云设备？

**答：** 可以。 本地固定卷将作为分层卷故障转移。 有关[对跨版本地固定卷进行故障转移和灾难恢复](storsimple-device-failover-disaster-recovery.md#considerations-for-device-failover)的详细信息

