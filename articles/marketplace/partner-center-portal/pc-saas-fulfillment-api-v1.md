---
title: SaaS 履单 Api v1 |Azure Marketplace
description: 介绍如何使用关联的履行 v1 Api 在 Azure Marketplace 上创建和管理 SaaS 产品/服务。
services: Azure, Marketplace, Cloud Partner Portal,
author: v-miclar
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: reference
ms.date: 05/23/2019
ms.author: evansma
ROBOTS: NOINDEX
ms.openlocfilehash: f56e9b4f6c3db6fb47452c7478f5a27445955e87
ms.sourcegitcommit: f52ce6052c795035763dbba6de0b50ec17d7cd1d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/24/2020
ms.locfileid: "76715388"
---
# <a name="saas-fulfillment-apis-version-1-deprecated"></a>SaaS 履单 Api 版本1（不推荐使用）

이 문서에서는 API를 사용하여 SaaS 제안을 만드는 방법을 설명합니다. 如果已选择 "通过 Azure 进行销售"，则需要使用由 REST 方法和终结点组成的 Api 来允许订阅 SaaS 产品。  

> [!WARNING]
> 此初始版本的 SaaS 履单 API 已弃用;请改用[SaaS 履单 API V2](./pc-saas-fulfillment-api-v2.md)。  此 API 的初始版本当前仅为提供给现有发布者提供服务。 

다음 API는 Azure와 SaaS 서비스를 통합하는 데 도움을 주기 위해 제공됩니다.

-   해결
-   구독하기
-   변환
-   구독 취소


## <a name="api-methods-and-endpoints"></a>API 方法和终结点

다음 섹션에서는 SaaS 제안 구독을 사용하도록 설정하는 데 사용할 수 있는 API 메서드 및 엔드포인트에 대해 설명합니다.


### <a name="marketplace-api-endpoint-and-api-version"></a>Marketplace API 엔드포인트 및 API 버전

Azure Marketplace API의 엔드포인트은 `https://marketplaceapi.microsoft.com`입니다.

현재 API 버전은 `api-version=2017-04-15`입니다.


### <a name="resolve-subscription"></a>구독 확인

엔드포인트 확인에 대한 POST 작업을 사용하여 마켓플레이스 토큰을 영구 리소스 ID로 확인할 수 있습니다.  리소스 ID는 SAAS 구독의 고유 식별자입니다. 

将用户重定向到 ISV 的网站时，URL 在查询参数中包含一个令牌。 ISV는 이 토큰을 사용하고, 이를 확인하는 요청을 수행해야 합니다. 응답에는 고유한 SAAS 구독 ID, 이름, 제품 ID 및 리소스 계획이 포함됩니다. 이 토큰은 한 시간 동안만 유효합니다.

*요청*

**POST**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/resolve?api-version=2017-04-15**

|  **매개 변수 이름** |     **설명**                                      |
|  ------------------ |     ---------------------------------------------------- |
|  api-version        |  이 요청에 사용할 작업의 버전입니다.   |
|  |  |


*헤더*

| **헤더 키**     | **필수** | **설명**                                                                                                                                                                                                                  |
|--------------------|--------------|-----------------------------------------------------------|
| x-ms-requestid     | 아닙니다.           | 클라이언트의 요청을 추적하기 위한 고유한 문자열 값(기본적으로 GUID)입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다.  |
| x-ms-correlationid | 아닙니다.           | 클라이언트의 작업에 대한 고유한 문자열 값입니다. 此字段将客户端操作的所有事件与服务器端上的事件关联起来。 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다. |
| Content-type       | 예          | `application/json`                                        |
| 권한 부여      | 예          | JWT(JSON Web Token) 전달자 토큰입니다.                    |
| x-ms-marketplace-token| 예| 当用户从 Azure 重定向到 SaaS ISV 的网站时，URL 中的令牌查询参数。 **注意：** 此令牌的有效时间仅为1小时。 또한 URL은 토큰 값을 사용하기 전에 브라우저에서 디코드합니다.|
|  |  |  |
  

*응답 본문*

``` json
{
    "id": "",
    "subscriptionName": "",
    "offerId": "",
    "planId": "",
}
```

| **매개 변수 이름** | **데이터 형식** | **설명**                       |
|--------------------|---------------|---------------------------------------|
| id                 | String        | SaaS 구독의 ID입니다.          |
| subscriptionName| String| SaaS 서비스를 구독하는 동안 Azure의 사용자가 설정한 SaaS 구독의 이름입니다.|
| OfferId            | String        | 사용자가 구독한 제안 ID입니다. |
| planId             | String        | 사용자가 구독한 요금제 ID입니다.  |
|  |  |  |


*응답 코드*

| **HTTP 상태 코드** | **오류 코드**     | **설명**                                                                         |
|----------------------|--------------------| --------------------------------------------------------------------------------------- |
| 200                  | `OK`                 | 토큰이 확인되었습니다.                                                            |
| 400                  | `BadRequest`         | 필요한 헤더가 없거나 잘못된 api-version을 지정했습니다. 토큰이 잘못된 형식을 갖거나 만료되었으므로 토큰을 확인하지 못했습니다(토큰은 생성된 후 1시간 동안만 유효함). |
| 403                  | `Forbidden`          | 호출자는 이 작업을 수행할 권한이 없습니다.                                 |
| 429                  | `RequestThrottleId`  | 서비스가 요청을 처리 중입니다. 나중에 다시 시도하세요.                                |
| 503                  | `ServiceUnavailable` | 서비스가 일시적으로 가동 중단되었습니다. 나중에 다시 시도하세요.                                        |
|  |  |  |


*응답 헤더*

| **헤더 키**     | **필수** | **설명**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 예          | 클라이언트에서 받은 요청 ID입니다.                                                                   |
| x-ms-correlationid | 예          | 클라이언트가 전달한 경우 상관관계 ID이고, 그렇지 않은 경우 서버 상관관계 ID입니다.                   |
| x-ms-activityid    | 예          | 서비스의 요청을 추적하기 위한 고유한 문자열 값입니다. 此 ID 用于任何对帐。 |
| Retry-After        | 아닙니다.           | 이 값은 429 응답에 대해서만 설정됩니다.                                                                   |
|  |  |  |


### <a name="subscribe"></a>구독하기

구독 엔드포인트를 사용하면 지정된 요금제로 SaaS 서비스 구독을 시작하고, 상거래 시스템에서 청구를 사용하도록 설정할 수 있습니다.

**PUT**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/ *{subscriptionId}* ?api-version=2017-04-15**

| **매개 변수 이름**  | **설명**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | 在通过解析 API 解析令牌后获取的 SaaS 订阅的唯一 ID。                              |
| api-version         | 이 요청에 사용할 작업의 버전입니다. |
|  |  |

*헤더*

|  **헤더 키**        | **필수** |  **설명**                                                  |
| ------------------     | ------------ | --------------------------------------------------------------------------------------- |
| x-ms-requestid         |   아닙니다.         | 클라이언트의 요청을 추적하기 위한 고유한 문자열 값(기본적으로 GUID)입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다. |
| x-ms-correlationid     |   아닙니다.         | 클라이언트의 작업에 대한 고유한 문자열 값입니다. 클라이언트 작업의 모든 이벤트를 서버 쪽의 이벤트와 상호 연결하기 위한 값입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다. |
| If-Match/If-None-Match |   아닙니다.         |   강력한 유효성 검사기 ETag 값입니다.                                                          |
| content-type           |   예        |    `application/json`                                                                   |
|  권한 부여         |   예        |    JWT(JSON Web Token) 전달자 토큰입니다.                                               |
| x-ms-marketplace-session-mode| 아닙니다. | SaaS 제안을 구독하는 동안 시험 실행 모드를 사용하도록 설정하기 위한 플래그입니다. 설정되면 구독 요금이 청구되지 않습니다. ISV 테스트 시나리오에 유용합니다. 请将其设置为 **"dryrun"**|
|  |  |  |

*본문*

``` json
{
    "lanId": "",
}
```

| **요소 이름** | **데이터 형식** | **설명**                      |
|------------------|---------------|--------------------------------------|
| planId           | (필수) 문자열        | SaaS 服务用户正在订阅的计划 ID。  |
|  |  |  |

*응답 코드*

| **HTTP 상태 코드** | **오류 코드**     | **설명**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | 지정된 요금제에 대해 수신된 SaaS 구독 활성화입니다.                   |
| 400                  | `BadRequest`         | 필수 헤더가 누락되었거나 JSON 본문의 형식이 잘못되었습니다. |
| 403                  | `Forbidden`          | 호출자는 이 작업을 수행할 권한이 없습니다.                   |
| 404                  | `NotFound`           | 지정된 ID를 갖는 구독이 없습니다.                                  |
| 409                  | `Conflict`           | 구독에 대해 다른 작업이 진행 중입니다.                     |
| 429                  | `RequestThrottleId`  | 서비스가 요청을 처리 중입니다. 나중에 다시 시도하세요.                  |
| 503                  | `ServiceUnavailable` | 서비스가 일시적으로 가동 중단되었습니다. 나중에 다시 시도하세요.                          |
|  |  |  |

对于202响应，请在 "操作位置" 标头上跟进请求操作的状态。 인증은 다른 Marketplace API와 동일합니다.

*응답 헤더*

| **헤더 키**     | **필수** | **설명**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 예          | 클라이언트에서 받은 요청 ID입니다.                                                                   |
| x-ms-correlationid | 예          | 클라이언트가 전달한 경우 상관관계 ID이고, 그렇지 않은 경우 서버 상관관계 ID입니다.                   |
| x-ms-activityid    | 예          | 서비스의 요청을 추적하기 위한 고유한 문자열 값입니다. 이 값은 모든 조정에 사용됩니다. |
| Retry-After        | 예          | 클라이언트가 상태를 확인할 수 있는 간격입니다.                                                       |
| Operation-Location | 예          | 작업 상태를 가져오기 위해 리소스에 대한 링크입니다.                                                        |
|  |  |  |

### <a name="change-plan-endpoint"></a>요금제 엔드포인트 변경

엔드포인트 변경을 통해 현재 구독한 요금제를 새 요금제로 변환할 수 있습니다.

**PATCH**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/ *{subscriptionId}* ?api-version=2017-04-15**

| **매개 변수 이름**  | **설명**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | SaaS 구독의 ID입니다.                              |
| api-version         | 이 요청에 사용할 작업의 버전입니다. |
|  |  |

*헤더*

| **헤더 키**          | **필수** | **설명**                                                                                                                                                                                                                  |
|-------------------------|--------------|---------------------------------------------------------------------------------------------------------------------|
| x-ms-requestid          | 아닙니다.           | 클라이언트의 요청을 추적하기 위한 고유한 문자열 값입니다. GUID를 사용하는 것이 좋습니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다.   |
| x-ms-correlationid      | 아닙니다.           | 클라이언트의 작업에 대한 고유한 문자열 값입니다. 클라이언트 작업의 모든 이벤트를 서버 쪽의 이벤트와 상호 연결하기 위한 값입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다. |
| If-Match /If-None-Match | 아닙니다.           | 강력한 유효성 검사기 ETag 값입니다.                              |
| content-type            | 예          | `application/json`                                        |
| 권한 부여           | 예          | JWT(JSON Web Token) 전달자 토큰입니다.                    |
|  |  |  |

*본문*

```json
{
    "planId": ""
}
```

|  **요소 이름** |  **데이터 형식**  | **설명**                              |
|  ---------------- | -------------   | --------------------------------------       |
|  planId           |  (필수) 문자열         | SaaS 服务用户正在订阅的计划 ID。          |
|  |  |  |

*응답 코드*

| **HTTP 상태 코드** | **오류 코드**     | **설명**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | 지정된 요금제에 대해 수신된 SaaS 구독 활성화입니다.                   |
| 400                  | `BadRequest`         | 필수 헤더가 누락되었거나 JSON 본문의 형식이 잘못되었습니다. |
| 403                  | `Forbidden`          | 호출자는 이 작업을 수행할 권한이 없습니다.                   |
| 404                  | `NotFound`           | 지정된 ID를 갖는 구독이 없습니다.                                  |
| 409                  | `Conflict`           | 구독에 대해 다른 작업이 진행 중입니다.                     |
| 429                  | `RequestThrottleId`  | 서비스가 요청을 처리 중입니다. 나중에 다시 시도하세요.                  |
| 503                  | `ServiceUnavailable` | 서비스가 일시적으로 가동 중단되었습니다. 나중에 다시 시도하세요.                          |
|  |  |  |

*응답 헤더*

| **헤더 키**     | **필수** | **설명**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 예          | 클라이언트에서 받은 요청 ID입니다.                                                                   |
| x-ms-correlationid | 예          | 클라이언트가 전달한 경우 상관관계 ID이고, 그렇지 않은 경우 서버 상관관계 ID입니다.                   |
| x-ms-activityid    | 예          | 서비스의 요청을 추적하기 위한 고유한 문자열 값입니다. 이 값은 모든 조정에 사용됩니다. |
| Retry-After        | 예          | 클라이언트가 상태를 확인할 수 있는 간격입니다.                                                       |
| Operation-Location | 예          | 작업 상태를 가져오기 위해 리소스에 대한 링크입니다.                                                        |
|  |  |  |

### <a name="delete-subscription"></a>구독 삭제

구독 엔드포인트에 대한 삭제 작업을 사용하여 지정된 ID를 갖는 구독을 삭제할 수 있습니다.

*요청*

**DELETE**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/ *{subscriptionId}* ?api-version=2017-04-15**

| **매개 변수 이름**  | **설명**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | SaaS 구독의 ID입니다.                              |
| api-version         | 이 요청에 사용할 작업의 버전입니다. |
|  |  |

*헤더*

| **헤더 키**     | **필수** | **설명**                                                                                                                                                                                                                  |
|--------------------|--------------| ----------------------------------------------------------|
| x-ms-requestid     | 아닙니다.           | 클라이언트의 요청을 추적하기 위한 고유한 문자열 값입니다. GUID를 사용하는 것이 좋습니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다.                                                           |
| x-ms-correlationid | 아닙니다.           | 클라이언트의 작업에 대한 고유한 문자열 값입니다. 클라이언트 작업의 모든 이벤트를 서버 쪽의 이벤트와 상호 연결하기 위한 값입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다. |
| 권한 부여      | 예          | JWT(JSON Web Token) 전달자 토큰입니다.                    |
|  |  |  |

*응답 코드*

| **HTTP 상태 코드** | **오류 코드**     | **설명**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | 지정된 요금제에 대해 수신된 SaaS 구독 활성화입니다.                   |
| 400                  | `BadRequest`         | 필수 헤더가 누락되었거나 JSON 본문의 형식이 잘못되었습니다. |
| 403                  | `Forbidden`          | 호출자는 이 작업을 수행할 권한이 없습니다.                   |
| 404                  | `NotFound`           | 지정된 ID를 갖는 구독이 없습니다.                                  |
| 429                  | `RequestThrottleId`  | 서비스가 요청을 처리 중입니다. 나중에 다시 시도하세요.                  |
| 503                  | `ServiceUnavailable` | 서비스가 일시적으로 가동 중단되었습니다. 나중에 다시 시도하십시오.                          |
|  |  |  |

对于202响应，请在 "操作位置" 标头上跟进请求操作的状态。 인증은 다른 Marketplace API와 동일합니다.

*응답 헤더*

| **헤더 키**     | **필수** | **설명**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 예          | 클라이언트에서 받은 요청 ID입니다.                                                                   |
| x-ms-correlationid | 예          | 클라이언트가 전달한 경우 상관관계 ID이고, 그렇지 않은 경우 서버 상관관계 ID입니다.                   |
| x-ms-activityid    | 예          | 서비스의 요청을 추적하기 위한 고유한 문자열 값입니다. 모든 조정에 사용됩니다. |
| Retry-After        | 예          | 클라이언트가 상태를 확인할 수 있는 간격입니다.                                                       |
| Operation-Location | 예          | 작업 상태를 가져오기 위해 리소스에 대한 링크입니다.                                                        |
|   |  |  |

### <a name="get-operation-status"></a>작업 상태 가져오기

이 엔드포인트를 사용하면 트리거된 비동기 작업(구독/구독 취소/요금제 변경)의 상태를 추적할 수 있습니다.

*요청*

**GET**

**https://marketplaceapi.microsoft.com/api/saas/operations/ *{operationId}* ?api-version=2017-04-15**

| **매개 변수 이름**  | **설명**                                       |
|---------------------|-------------------------------------------------------|
| operationId         | 트리거된 작업의 고유 ID입니다.                |
| api-version         | 이 요청에 사용할 작업의 버전입니다. |
|  |  |

*헤더*

| **헤더 키**     | **필수** | **설명**                                                                                                                                                                                                                  |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 아닙니다.           | 클라이언트의 요청을 추적하기 위한 고유한 문자열 값입니다. GUID를 사용하는 것이 좋습니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다.   |
| x-ms-correlationid | 아닙니다.           | 클라이언트의 작업에 대한 고유한 문자열 값입니다. 클라이언트 작업의 모든 이벤트를 서버 쪽의 이벤트와 상호 연결하기 위한 값입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다.  |
| 권한 부여      | 예          | JWT(JSON Web Token) 전달자 토큰입니다.                    |
|  |  |  | 

*응답 본문*

```json
{
    "id": "",
    "status": "",
    "resourceLocation": "",
    "created": "",
    "lastModified": ""
}
```

| **매개 변수 이름** | **데이터 형식** | **설명**                                                                                                                                               |
|--------------------|---------------|-------------------------------------------------------------------------------------------|
| id                 | String        | 작업의 ID입니다.                                                                      |
| 상태             | 열거형          | 작업 상태로, `In Progress`, `Succeeded` 또는 `Failed` 중 하나입니다.          |
| resourceLocation   | String        | 만들었거나 수정한 구독에 대한 링크입니다. 이 링크는 클라이언트가 업데이트된 상태 게시 작업을 가져오는 데 도움이 됩니다. `Unsubscribe` 작업에 대해서는 이 값이 설정되지 않습니다. |
| created            | DateTime      | 작업 생성 시간(UTC)입니다.                                                           |
| lastModified       | DateTime      | 마지막으로 작업을 업데이트한 시간(UTC)입니다.                                                      |
|  |  |  |

*응답 코드*

| **HTTP 상태 코드** | **오류 코드**     | **설명**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | 가져오기 요청을 확인했으며 본문에 응답이 포함됩니다.    |
| 400                  | `BadRequest`         | 필요한 헤더가 없거나 잘못된 api-version을 지정했습니다. |
| 403                  | `Forbidden`          | 호출자는 이 작업을 수행할 권한이 없습니다.                      |
| 404                  | `NotFound`           | 找不到具有给定 ID 的订阅。                                     |
| 429                  | `RequestThrottleId`  | 서비스가 요청을 처리 중입니다. 나중에 다시 시도하세요.                     |
| 503                  | `ServiceUnavailable` | 서비스가 일시적으로 가동 중단되었습니다. 나중에 다시 시도하세요.                             |
|  |  |  |

*응답 헤더*

| **헤더 키**     | **필수** | **설명**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 예          | 클라이언트에서 받은 요청 ID입니다.                                                                   |
| x-ms-correlationid | 예          | 클라이언트가 전달한 경우 상관관계 ID이고, 그렇지 않은 경우 서버 상관관계 ID입니다.                   |
| x-ms-activityid    | 예          | 서비스의 요청을 추적하기 위한 고유한 문자열 값입니다. 모든 조정에 사용됩니다. |
| Retry-After        | 예          | 클라이언트가 상태를 확인할 수 있는 간격입니다.                                                       |
|  |  |  |

### <a name="get-subscription"></a>구독 가져오기

구독 엔드포인트에 대한 가져오기 작업을 통해 지정된 리소스 식별자를 갖는 구독을 검색할 수 있습니다.

*요청*

**GET**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/ *{subscriptionId}* ?api-version=2017-04-15**

| **매개 변수 이름**  | **설명**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | SaaS 구독의 ID입니다.                              |
| api-version         | 이 요청에 사용할 작업의 버전입니다. |
|  |  |

*헤더*

| **헤더 키**     | **필수** | **설명**                                                                                           |
|--------------------|--------------|-----------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 아닙니다.           | 클라이언트의 요청을 추적하기 위한 고유한 문자열 값(기본적으로 GUID)입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다.                                                           |
| x-ms-correlationid | 아닙니다.           | 클라이언트의 작업에 대한 고유한 문자열 값입니다. 클라이언트 작업의 모든 이벤트를 서버 쪽의 이벤트와 상호 연결하기 위한 값입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다. |
| 권한 부여      | 예          | JWT(JSON Web Token) 전달자 토큰입니다.                                                                    |
|  |  |  |

*응답 본문*

```json
{
    "id": "",
    "saasSubscriptionName": "",
    "offerId": "",
    "planId": "",
    "saasSubscriptionStatus": "",
    "created": "",
    "lastModified": ""
}
```

| **매개 변수 이름**     | **데이터 형식** | **설명**                               |
|------------------------|---------------|-----------------------------------------------|
| id                     | String        | Azure에서 SaaS 구독 리소스의 ID입니다.    |
| offerId                | String        | 사용자가 구독한 제안 ID입니다.         |
| planId                 | String        | 사용자가 구독한 요금제 ID입니다.          |
| saasSubscriptionName   | String        | SaaS 구독의 이름입니다.                |
| saasSubscriptionStatus | 열거형          | 작업 상태입니다.  다음 중 하나  <br/> - `Subscribed`: 구독이 활성화되어 있습니다.  <br/> - `Pending`: 사용자가 리소스를 만들지만, ISV에서 활성화하지 않았습니다.   <br/> - `Unsubscribed`: 사용자가 구독을 취소했습니다.   <br/> - `Suspended`: 사용자 구독을 일시 중단했습니다.   <br/> - `Deactivated`: Azure 구독이 일시 중단되었습니다.  |
| created                | DateTime      | 구독 생성 타임스탬프 값(UTC)입니다. |
| lastModified           | DateTime      | 구독 수정 타임스탬프 값(UTC)입니다. |
|  |  |  |

*응답 코드*

| **HTTP 상태 코드** | **오류 코드**     | **설명**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | 가져오기 요청을 확인했으며 본문에 응답이 포함됩니다.    |
| 400                  | `BadRequest`         | 필요한 헤더가 없거나 잘못된 api-version을 지정했습니다. |
| 403                  | `Forbidden`          | 호출자는 이 작업을 수행할 권한이 없습니다.                      |
| 404                  | `NotFound`           | 지정된 ID를 갖는 구독이 없습니다.                                     |
| 429                  | `RequestThrottleId`  | 서비스가 요청을 처리 중입니다. 나중에 다시 시도하세요.                     |
| 503                  | `ServiceUnavailable` | 서비스가 일시적으로 가동 중단되었습니다. 나중에 다시 시도하세요.                             |
|  |  |  |

*응답 헤더*

| **헤더 키**     | **필수** | **설명**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 예          | 클라이언트에서 받은 요청 ID입니다.                                                                   |
| x-ms-correlationid | 예          | 클라이언트가 전달한 경우 상관관계 ID이고, 그렇지 않은 경우 서버 상관관계 ID입니다.                   |
| x-ms-activityid    | 예          | 서비스의 요청을 추적하기 위한 고유한 문자열 값입니다. 모든 조정에 사용됩니다. |
| Retry-After        | 아닙니다.           | 클라이언트가 상태를 확인할 수 있는 간격입니다.                                                       |
| eTag               | 예          | 작업 상태를 가져오기 위해 리소스에 대한 링크입니다.                                                        |
|  |  |  |

### <a name="get-subscriptions"></a>구독 가져오기

구독 엔드포인트의 가져오기 작업을 사용하면 ISV의 모든 제안에 대한 모든 구독을 검색할 수 있습니다.

*요청*

**GET**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions?api-version=2017-04-15**

| **매개 변수 이름**  | **설명**                                       |
|---------------------|-------------------------------------------------------|
| api-version         | 이 요청에 사용할 작업의 버전입니다. |
|  |  |

*헤더*

| **헤더 키**     | **필수** | **설명**                                           |
|--------------------|--------------|-----------------------------------------------------------|
| x-ms-requestid     | 아닙니다.           | 클라이언트의 요청을 추적하기 위한 고유한 문자열 값입니다. GUID를 사용하는 것이 좋습니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다.             |
| x-ms-correlationid | 아닙니다.           | 클라이언트의 작업에 대한 고유한 문자열 값입니다. 클라이언트 작업의 모든 이벤트를 서버 쪽의 이벤트와 상호 연결하기 위한 값입니다. 이 값을 제공하지 않으면 값이 하나 생성된 후 응답 헤더에 제공됩니다. |
| 권한 부여      | 예          | JWT(JSON Web Token) 전달자 토큰입니다.                    |
|  |  |  |

*응답 본문*

```json
{
    "id": "",
    "saasSubscriptionName": "",
    "offerId": "",
    "planId": "",
    "saasSubscriptionStatus": "",
    "created": "",
    "lastModified": ""
}
```

| **매개 변수 이름**     | **데이터 형식** | **설명**                               |
|------------------------|---------------|-----------------------------------------------|
| id                     | String        | Azure 中的 SaaS 订阅资源的 ID    |
| offerId                | String        | 用户订阅的产品 ID         |
| planId                 | String        | 用户订阅的计划 ID          |
| saasSubscriptionName   | String        | SaaS 订阅的名称                |
| saasSubscriptionStatus | 열거형          | 작업 상태입니다.  다음 중 하나  <br/> - `Subscribed`: 구독이 활성화되어 있습니다.  <br/> - `Pending`: 사용자가 리소스를 만들지만, ISV에서 활성화하지 않았습니다.   <br/> - `Unsubscribed`: 사용자가 구독을 취소했습니다.   <br/> - `Suspended`: 사용자 구독을 일시 중단했습니다.   <br/> - `Deactivated`: Azure 구독이 일시 중단되었습니다.  |
| created                | DateTime      | UTC 格式的订阅创建时间戳值 |
| lastModified           | DateTime      | 订阅修改了 UTC 格式的时间戳值 |
|  |  |  |

*응답 코드*

| **HTTP 상태 코드** | **오류 코드**     | **설명**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | 가져오기 요청을 확인했으며 본문에 응답이 포함됩니다.    |
| 400                  | `BadRequest`         | 필요한 헤더가 없거나 잘못된 api-version을 지정했습니다. |
| 403                  | `Forbidden`          | 호출자는 이 작업을 수행할 권한이 없습니다.                      |
| 404                  | `NotFound`           | 지정된 ID를 갖는 구독이 없습니다.                                     |
| 429                  | `RequestThrottleId`  | 서비스가 요청을 처리 중입니다. 나중에 다시 시도하세요.                     |
| 503                  | `ServiceUnavailable` | 서비스가 일시적으로 가동 중단되었습니다. 나중에 다시 시도하십시오.                             |
|  |  |  |

*응답 헤더*

| **헤더 키**     | **필수** | **설명**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | 예          | 클라이언트에서 받은 요청 ID입니다.                                                                   |
| x-ms-correlationid | 예          | 클라이언트가 전달한 경우 상관관계 ID이고, 그렇지 않은 경우 서버 상관관계 ID입니다.                   |
| x-ms-activityid    | 예          | 서비스의 요청을 추적하기 위한 고유한 문자열 값입니다. 모든 조정에 사용됩니다. |
| Retry-After        | 아닙니다.           | 클라이언트가 상태를 확인할 수 있는 간격입니다.                                                       |
|  |  |  |

### <a name="saas-webhook"></a>SaaS 웹후크

SaaS 웹후크는 SaaS 서비스에 변경 내용을 미리 알리는 데 사용됩니다. 이 POST API는 인증되지 않은 것으로 예상되며 Microsoft 서비스에서 호출됩니다. SaaS 서비스는 웹후크 알림에 대한 작업을 수행하기 전에 작업 API를 호출하여 유효성을 검사하고 권한을 부여해야 합니다. 

*본문*

``` json
  {
    "id": "be750acb-00aa-4a02-86bc-476cbe66d7fa",
    "activityId": "be750acb-00aa-4a02-86bc-476cbe66d7fa",
    "subscriptionId":"cd9c6a3a-7576-49f2-b27e-1e5136e57f45",
    "action": "Subscribe", // Subscribe/Unsubscribe/ChangePlan
    "operationRequestSource":"Azure",
    "timeStamp":"2018-12-01T00:00:00"
  }
```

| **매개 변수 이름**     | **데이터 형식** | **설명**                               |
|------------------------|---------------|-----------------------------------------------|
| id  | String       | 트리거된 작업의 고유 ID입니다.                |
| activityId   | String        | 서비스의 요청을 추적하기 위한 고유한 문자열 값입니다. 모든 조정에 사용됩니다.               |
| subscriptionId                     | String        | Azure에서 SaaS 구독 리소스의 ID입니다.    |
| offerId                | String        | 사용자가 구독한 제안 ID입니다. “업데이트” 작업에만 제공됩니다.        |
| publisherId                | String        | SaaS 제안의 게시자 ID입니다.         |
| planId                 | String        | 사용자가 구독한 요금제 ID입니다. “업데이트” 작업에만 제공됩니다.          |
| action                 | String        | 이 알림을 트리거하는 작업입니다. 가능한 값 - 활성화, 삭제, 일시 중단, 복구, 업데이트          |
| timeStamp                 | String        | 이 알림이 트리거된 타임스탬프 값(UTC)입니다.          |
|  |  |  |


## <a name="next-steps"></a>다음 단계

开发人员还可以使用[云合作伙伴门户 REST api](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal-orig/cloud-partner-portal-api-overview)以编程方式检索和操作工作负荷、产品/服务和发布者配置文件。
