---
title: 清理缺失数据：模块引用
titleSuffix: Azure Machine Learning service
description: 了解如何使用 Azure 机器学习服务中的 "清理缺失数据" 模块删除、替换或推断缺失值。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 05/02/2019
ms.openlocfilehash: 7167d53cce2c44f754f438753acda008e53bb2b3
ms.sourcegitcommit: e0e6663a2d6672a9d916d64d14d63633934d2952
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/21/2019
ms.locfileid: "72693216"
---
# <a name="clean-missing-data-module"></a>清理缺失数据模块

本文介绍了 Azure 机器学习服务的可视界面（预览）的模块。

使用此模块可以删除、替换或推断缺失的值。 

数据科学家经常检查数据是否缺少值，然后执行各种操作来修复数据或插入新值。 此类清理操作的目的是防止在训练模型时丢失数据导致的问题。 

此模块支持 "清除" 缺失值的多种类型的操作，其中包括：

+ 使用占位符、平均值或其他值替换缺失值
+ 完全删除具有缺失值的行和列
+ 基于统计方法推断值


使用此模块不会更改源数据集。 而是在工作区中创建可在后续工作流中使用的新数据集。 你还可以保存新的已清理的数据集以供重复使用。

此模块还输出用于清理缺失值的转换的定义。 您可以通过使用 "[应用转换](./apply-transformation.md)" 模块在具有相同架构的其他数据集上重复使用此转换。  

## <a name="how-to-use-clean-missing-data"></a>如何使用 "清理缺失数据"

此模块允许您定义清理操作。 你还可以保存清理操作，以便以后可以将其应用于新数据。 请参阅以下链接，了解有关如何创建和保存清理过程的说明： 
 
+ 替换缺失值
  
+ 将清理转换应用于新数据
 
> [!IMPORTANT]
> 用于处理缺失值的清理方法可能会对结果产生严重影响。 建议您尝试不同方法。 考虑使用特定方法的理由和结果的质量。

### <a name="replace-missing-values"></a>替换缺失值  

每次将 "[清理缺失数据](./clean-missing-data.md)" 模块应用于一组数据时，相同的清理操作都会应用于所选的所有列。 因此，如果您需要使用不同的方法清理不同的列，请使用模块的单独实例。

1.  向管道添加 "[清理缺失数据](./clean-missing-data.md)" 模块，并连接包含缺失值的数据集。  
  
2.  对于**要清理的列**，请选择包含要更改的缺失值的列。 您可以选择多个列，但必须在所有选定列中使用相同的替换方法。 因此，通常需要单独清理字符串列和数字列。

    例如，若要检查所有数值列中是否缺少值：

    1. 打开列选择器，然后选择 "**带规则**"。
    2. 对于 "**始**于"，请选择 "**无列**"。

        还可以从所有列开始，然后排除列。 最初，如果您首次单击 "**所有列**"，则不会显示规则，但您可以单击 "**无列**"，然后再次单击 "**所有**列" 以从所有列开始，然后基于 "名称"、"数据类型" 或 "列" 索引筛选出（排除）列。

    3. 对于 "**包含**"，请从下拉列表中选择 "**列类型**"，然后选择 "**数值**" 或更具体的数值类型。 
  
    选择的所有清除或替换方法必须适用于所选内容中的**所有**列。 如果任何列中的数据与指定的操作不兼容，则该模块将返回一个错误并停止管道。
  
3.  对于 "**最小缺失值比率**"，请指定执行操作所需的缺失值的最小数目。  
  
    将此选项与 "**最大缺失值比率**" 结合使用，定义在数据集上执行清理操作的条件。 如果缺少值的行太多或太少，则无法执行该操作。 
  
    输入的数字表示缺少的值与列中所有值的**比率**。 默认情况下，"**最小缺失值比率**" 属性设置为0。 这意味着即使只有一个缺失值，也会清理缺失值。 

    > [!WARNING]
    > 每一列都必须满足此条件，才能应用指定的操作。 例如，假设您选择了三列，然后将缺失值的最小值设置为 .2 （20%），但只有一个列实际缺少值为20%。 在这种情况下，清除操作仅适用于具有超过20% 缺失值的列。 因此，其他列将保持不变。
    > 
    > 如果对缺失值是否已更改有任何疑问，请选择选项 "**生成缺失值指示器列**"。 将向数据集追加一个列，以指示每个列是否满足最小和最大范围的指定条件。  
  
4. 对于 "**最大缺失值比率**"，请指定要执行的操作的最大缺失值数。   
  
    例如，您可能希望仅在30% 或更少行包含缺少的值时才执行缺少值替换，但如果超过30% 的行超过30% 的行，则将值保持原样。  
  
    将数字定义为列中所有值的缺失值比率。 默认情况下，"**最大缺失值比率**" 设置为1。 这意味着即使列中缺少100% 的值，也会清理缺失值。  
  
   
  
5. 对于 "**清理模式**"，请选择以下选项之一来替换或删除缺失值：  
  
  
    + **自定义替换值**：使用此选项可以指定适用于所有缺失值的占位符值（如0或 NA）。 指定为替换的值必须与列的数据类型兼容。
  
    + **替换为均值**：计算列平均值，并使用平均值作为列中每个缺失值的替换值。  
  
        仅适用于具有整数、双精度或布尔数据类型的列。  
  
    + **替换为**中值：计算列中间值，并使用中间值作为列中任何缺失值的替换项。  
  
        仅适用于具有 Integer 或 Double 数据类型的列。 
  
    + **替换为 mode**：计算列的模式，并将模式用作列中每个缺失值的替换值。  
  
        适用于具有整数、双精度、布尔值或分类数据类型的列。 
  
    + **删除整行**：完全删除数据集中包含一个或多个缺失值的任何行。 如果缺失值可以被视为随机丢失，这会很有用。  
  
    + **删除整列**：完全删除数据集中包含一个或多个缺失值的任何列。  
  
    
  
6. 如果选择了 "**自定义替换值**" 选项，则选项 "**替换值**" 可用。 键入要用作列中所有缺失值的替换值的新值。  
  
    请注意，只能在具有整数、双精度、布尔值或日期数据类型的列中使用此选项。 对于日期列，也可以输入替换值作为 100 1/1/0001 12:00 毫微秒  
  
7. "**生成缺失值指示器列**"：如果要输出列中的值是否满足缺少值清理的条件，请选择此选项。 当设置新的清理操作并想要确保它按设计方式工作时，此选项特别有用。
  
8. 运行管道。

### <a name="results"></a>结果

该模块将返回两个输出：  

-   已**清理的数据集**：包含所选列的数据集，如果选择了此选项，则会按指定处理缺失值和指示器列。  

    未选择进行清理的列也 "通过"。  
  
-  **清理转换**：一种用于清理的数据转换，可以将其保存在工作区中，以后再应用于新数据。

### <a name="apply-a-saved-cleaning-operation-to-new-data"></a>将已保存的清理操作应用于新数据  

如果你需要经常重复执行清理操作，则建议你将食谱作为*转换*保存，以便重复使用相同的数据集。 如果您必须频繁地重新导入，然后清除具有相同架构的数据，则保存清理转换特别有用。  
      
1.  向管道添加 "[应用转换](./apply-transformation.md)" 模块。  
  
2.  添加要清理的数据集，并将数据集连接到右侧输入端口。  
  
3.  在接口的左窗格中展开 "**转换**" 组。 找到保存的转换，并将其拖放到管道中。  
  
4.  将保存的转换连接到 "[应用转换](./apply-transformation.md)" 的左侧输入端口。 

    应用保存的转换时，不能选择要应用转换的列。 这是因为已经定义了转换，并自动将其应用到原始操作中指定的列。

    但是，假设您对数值列的子集创建了转换。 您可以将此转换应用到混合列类型的数据集，而不会引发错误，因为丢失的值仅在匹配的数字列中发生更改。

6.  运行管道。  

## <a name="next-steps"></a>后续步骤

查看可用于 Azure 机器学习服务[的模块集](module-reference.md)。 