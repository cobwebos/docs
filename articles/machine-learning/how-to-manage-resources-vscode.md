---
title: 使用 VS Code 扩展（预览版）创建和管理资源
titleSuffix: Azure Machine Learning
description: 使用 VS Code 扩展创建和管理资源
services: machine-learning
author: luisquintanilla
ms.author: luquinta
ms.reviewer: luquinta
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.custom: how-to
ms.date: 09/30/2020
ms.openlocfilehash: 1120a3636b7ce24dde0d33c213f9063f910123c4
ms.sourcegitcommit: f5580dd1d1799de15646e195f0120b9f9255617b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/29/2020
ms.locfileid: "91530623"
---
# <a name="manage-azure-machine-learning-resources-with-the-vs-code-extension-preview"></a>使用 VS Code 扩展（预览版）管理 Azure 机器学习资源

了解如何使用 VS Code 扩展管理 Azure 机器学习资源。

![Azure 机器学习 VS Code 扩展](media/how-to-manage-resources-vscode/azure-machine-learning-vscode-extension.png)

## <a name="prerequisites"></a>先决条件

- Azure 订阅。 如果没有订阅，注册之后即可试用 [Azure 机器学习免费版或付费版](https://aka.ms/AMLFree)。
- Visual Studio Code。 如果尚未安装它，请[安装它](https://code.visualstudio.com/docs/setup/setup-overview)。
- VS Code Azure 机器学习扩展。 请按照 [Azure 机器学习 VS Code 扩展安装指南](tutorial-setup-vscode-extension.md#install-the-extension)安装该扩展。

以下所有过程都假设你所在位置为 Visual Studio Code 的“Azure 机器学习”视图。 若要启动扩展，请在 VS Code 活动栏上选择 **Azure** 图标。

## <a name="workspaces"></a>工作区

有关详细信息，请参阅[工作区](concept-workspace.md)。

### <a name="create-a-workspace"></a>创建工作区

1. 在“Azure 机器学习”视图中，右键单击你的订阅节点，然后选择“创建工作区”。
1. 在提示中执行以下操作：
    1. 为你的工作区提供一个名称
    1. 选择自己的 Azure 订阅
    1. 选择或创建要在其中预配工作区的新资源组
    1. 选择要在其中预配工作区的位置。

用于创建工作区的其他方法包括：

- 在 **命令面板 >** 打开命令面板视图，并在 " **Azure ML：创建工作区**" 文本提示符下输入。
- 单击“Azure 机器学习”视图顶部的 `+` 图标。
- 在预配其他资源的过程中，当系统提示你选择工作区时创建新的工作区。

### <a name="remove-a-workspace"></a>删除工作区

1. 展开包含你的工作区的订阅节点。
1. 右键单击要删除的工作区。
1. 选择是否要进行以下删除：
    - 仅工作区：此选项仅删除工作区 Azure 资源。 工作区所附加到的资源组、存储帐户和任何其他资源仍在 Azure 中。
    - 包括关联的资源：此选项会删除工作区以及与其关联的所有资源。

## <a name="datastores"></a>数据存储

VS Code 扩展目前支持以下类型的数据存储：

- Azure 文件共享
- Azure Blob 存储

创建工作区时，将为这些类型中的每一个创建一个数据存储。

有关详细信息，请参阅[数据存储](concept-data.md#datastores)。

### <a name="create-a-datastore"></a>创建数据存储

1. 展开包含你的工作区的订阅节点。
1. 展开要在其下创建数据存储的工作区节点。
1. 右键单击“数据存储”节点，然后选择“注册数据存储”。
1. 在提示中执行以下操作：
    1. 为你的数据存储提供一个名称。
    1. 选择数据存储类型。
    1. 选择你的存储资源。 可以选择与工作区关联的存储资源，也可以从 Azure 订阅的任何有效存储资源中进行选择。
    1. 在前面所选的存储资源中选择你的数据所在的容器。
1. VS Code 中会出现一个配置文件。 如果对配置文件满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。

### <a name="manage-a-datastore"></a>管理数据存储

1. 展开包含你的工作区的订阅节点。
1. 展开你的工作区节点。
1. 在工作区中展开“数据存储”节点。
1. 选择要对其执行以下操作的数据存储：
    - 设置为默认值。 这是每次运行试验时将使用的数据存储。
    - 检查只读设置。
    - 修改。 更改身份验证类型和凭据。 支持的身份验证类型包括帐户密钥和 SAS 令牌。

## <a name="datasets"></a>数据集

该扩展当前支持以下数据集类型：

- 表格：允许将数据具体化为数据帧（Pandas 或 PySpark）。
- *文件*：文件或文件集合。 允许你将文件下载或装载到计算机。

有关详细信息，请参阅[数据集](concept-data.md#datasets)

### <a name="create-dataset"></a>创建数据集

1. 展开包含你的工作区的订阅节点。
1. 展开要在其下创建数据存储的工作区节点。
1. 右键单击“数据集”节点，然后选择“创建数据集”。
1. 在提示中执行以下操作：
    1. 选择数据集类型
    1. 定义数据位置：数据位于电脑上还是 Web 上
    1. 提供你的数据的位置。 这可以是单个文件，也可以是包含数据文件的目录。
    1. 选择要将数据上传到其中的数据存储。
    1. 提供有助于在数据存储中识别你的数据集的前缀。

### <a name="version-datasets"></a>对数据集进行版本控制

构建机器学习模型时，可能需要根据数据变化对数据集进行版本控制。 若要在 VS Code 扩展中执行此操作，请完成以下步骤：

1. 展开包含你的工作区的订阅节点。
1. 展开你的工作区节点。
1. 展开“数据集”节点。
1. 右键单击要进行版本控制的数据集，然后选择“创建新版本”。
1. 在提示中执行以下操作：
    1. 选择数据集类型
    1. 定义数据位置：将数据置于电脑上还是 Web 上。
    1. 提供你的数据的位置。 这可以是单个文件，也可以是包含数据文件的目录。
    1. 选择要将数据上传到其中的数据存储。
    1. 提供有助于在数据存储中识别你的数据集的前缀。

### <a name="view-dataset-properties"></a>查看数据集属性

使用此选项可以查看与特定数据集关联的元数据。 若要在 VS Code 扩展中执行此操作，请完成以下步骤：

1. 展开你的工作区节点。
1. 展开“数据集”节点。
1. 右键单击要检查的数据集，然后选择“查看数据集属性”。 这会显示一个配置文件，其中包含最新的数据集版本的属性。

> [!NOTE]
> 如果你有数据集的多个版本，可以选择仅查看特定版本的数据集属性，方法是：展开该数据集节点，然后在感兴趣的版本上执行本部分所述的步骤。

### <a name="unregister-datasets"></a>注销数据集

若要删除某个数据集及其所有版本，请将其注销。 若要在 VS Code 扩展中执行此操作，请完成以下步骤：

1. 展开你的工作区节点。
1. 展开“数据集”节点。
1. 右键单击要注销的数据集，然后选择“注销数据集”。

## <a name="environments"></a>环境

有关详细信息，请参阅[环境](concept-environments.md)。

### <a name="create-environment"></a>创建环境

1. 展开包含你的工作区的订阅节点。
1. 展开要在其下创建数据存储的工作区节点。
1. 右键单击“环境”节点，然后选择“创建环境”。
1. 在提示中执行以下操作：
    1. 为你的环境提供一个名称
    1. 定义你的环境配置：
        - 特选的环境：Azure 机器学习中的预配置环境。 可以通过修改 JSON 文件中的 `dependencies` 属性来进一步自定义环境。 详细了解[特选的环境](resource-curated-environments.md)。
        - Conda 依赖项文件：对于 Anaconda 环境，可以提供包含环境定义的文件。
        - Pip 要求文件：对于 pip 环境，可以提供包含环境定义的文件。
        - 现有的 Conda 环境：此选项会查找本地电脑中的 conda 环境，并尝试基于所选环境来构建环境。
        - *自定义*：定义你自己的通道和依赖项
    1. 此时会在编辑器中打开一个配置文件。 如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。

### <a name="view-environment-configurations"></a>查看环境配置

若要在扩展中查看特定环境的依赖项和配置，请执行以下操作：

1. 展开包含你的工作区的订阅节点。
1. 展开你的工作区节点。
1. 展开“环境”节点。
1. 右键单击要查看的环境，并选择“查看环境”。

### <a name="edit-environment-configurations"></a>编辑环境配置

若要在扩展中编辑特定环境的依赖项和配置，请执行以下操作：

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“环境”节点。
1. 右键单击要查看的环境，并选择“编辑环境”。
1. 进行修改之后，如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。

## <a name="experiments"></a>试验

有关详细信息，请参阅[试验](concept-azure-machine-learning-architecture.md#experiments)。

### <a name="create-experiment"></a>创建试验

1. 展开包含你的工作区的订阅节点。
1. 展开你的工作区节点。
1. 右键单击工作区中的“试验”节点，然后选择“创建试验”。 
1. 在提示中，为你的试验提供一个名称。

### <a name="run-experiment"></a>运行试验

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“试验”节点。
1. 右键单击要运行的试验。
1. 选择活动栏中的“运行试验”图标。
1. 选择是要本地运行试验还是以远程方式运行试验。 有关在本地运行和调试试验的详细信息，请参阅 [调试指南](how-to-debug-visual-studio-code.md) 。
1. 选择订阅。
1. 选择要在其下运行试验的 Azure ML 工作区。
1. 选择你的试验。
1. 选择或创建要在其上运行试验的计算。
1. 为试验选择或创建运行配置。

也可选择扩展顶部的“运行试验”按钮，然后在提示中配置试验运行。

### <a name="view-experiment"></a>查看试验

若要在 Azure 机器学习工作室中查看试验，请执行以下操作：

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“试验”节点。
1. 右键单击要查看的试验，并选择“查看试验”。 
1. 此时会出现一个提示，要求你在 Azure 机器学习工作室中打开试验 URL。 选择“打开”  。

### <a name="track-run-progress"></a>跟踪运行进度

运行试验时，你可能希望查看其进度。 若要从扩展中跟踪 Azure 机器学习工作室中某个运行的进度，请执行以下操作：

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“试验”节点。
1. 展开要跟踪其进度的试验节点。
1. 右键单击该运行，然后选择“在 Azure 门户中查看运行”。
1. 此时会出现一个提示，要求你在 Azure 机器学习工作室中打开运行 URL。 选择“打开”  。

### <a name="download-run-logs--outputs"></a>下载运行日志和输出

某个运行完成后，你可能希望下载日志和资产，例如在试验运行过程中生成的模型。

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“试验”节点。
1. 展开要跟踪其进度的试验节点。
1. 右键单击该运行：
    - 若要下载输出，请选择“下载输出”。
    - 若要下载日志，请选择“下载日志”。

### <a name="view-run-metadata"></a>查看运行元数据

在扩展中，可以检查元数据，例如用于运行的运行配置以及运行详细信息。

## <a name="compute-instances"></a>计算实例

有关详细信息，请参阅 [计算实例](concept-compute-instance.md)。

### <a name="create-compute-instance"></a>创建计算实例

1. 展开包含你的工作区的订阅节点。
1. 展开要在其下创建计算实例的工作区节点。
1. 右键单击 " **计算实例** " 节点，然后选择 " **创建计算实例**"。
1. 在提示中执行以下操作：
    1. 提供计算实例的名称。
    1. 从列表中选择 VM 大小。
    1. 选择是否要启用 SSH 访问。
        1. 如果启用 SSH 访问，还必须提供公共 SSH 密钥或包含密钥的文件。 有关详细信息，请参阅有关 [在 Azure 上创建和使用 SSH 密钥的指南](https://docs.microsoft.com/azure/virtual-machines/linux/mac-create-ssh-keys)。

### <a name="stop-or-restart-compute-instance"></a>停止或重启计算实例

1. 展开包含你的工作区的订阅节点。
1. 展开工作区中的 " **计算实例** " 节点。
1. 右键单击要停止或重新启动的计算实例，并分别选择 " **停止计算实例** " 或 " **重启计算实例** "。

### <a name="view-compute-instance-configuration"></a>查看计算实例配置

1. 展开包含你的工作区的订阅节点。
1. 展开工作区中的 " **计算实例** " 节点。
1. 右键单击要检查的计算实例，然后选择 " **查看计算实例属性**"。

### <a name="delete-compute-instance"></a>删除计算实例

1. 展开包含你的工作区的订阅节点。
1. 展开工作区中的 " **计算实例** " 节点。
1. 右键单击要删除的计算实例，然后选择 " **删除计算实例**"。

## <a name="compute-clusters"></a>计算群集

此插件支持以下计算类型：

- Azure 机器学习计算群集
- Azure Kubernetes 服务

有关详细信息，请参阅[计算目标](concept-compute-target.md#train)。

### <a name="create-compute"></a>创建计算

1. 展开包含你的工作区的订阅节点。
1. 展开要在其下创建计算群集的工作区节点。
1. 右键单击“计算群集”节点，然后选择“创建计算” 。
1. 在提示中执行以下操作：
    1. 选择计算类型
    1. 选择 VM 大小。 详细了解 [VM 大小](https://docs.microsoft.com/azure/virtual-machines/linux/sizes)。
    1. 为你的计算提供一个名称。

### <a name="view-compute-configuration"></a>查看计算配置

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“计算群集”节点。
1. 右键单击要查看的计算，然后选择“查看计算属性”。

### <a name="edit-compute-scale-settings"></a>编辑计算缩放设置

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“计算群集”节点。
1. 右键单击要编辑的计算，然后选择“编辑计算”。
1. 此时会在编辑器中打开一个用于计算的配置文件。 如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。

### <a name="delete-compute"></a>删除计算

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“计算群集”节点。
1. 右键单击要删除的计算，然后选择“删除计算”。

### <a name="create-run-configuration"></a>创建运行配置

若要在扩展中创建运行配置，请执行以下操作：

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“计算群集”节点。
1. 右键单击要在其下创建运行配置的计算目标，然后选择 " **创建运行配置**"。
1. 在提示中执行以下操作：
    1. 为你的计算目标提供一个名称
    1. 选择或创建一个新环境。
    1. 键入要运行的脚本的名称，或按 **Enter** 以在本地计算机上浏览查找该脚本。
    1. （可选）选择是否要为训练运行创建数据参考。 如果你这样做，系统会提示你在运行配置中定义一个数据集。
        1. 选择你注册的数据集之一以链接到运行配置，此时会在编辑器中打开数据集的配置文件。 如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。
    1. 如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。

### <a name="edit-run-configuration"></a>编辑运行配置

1. 展开包含你的工作区的订阅节点。
1. 在工作区的“计算群集”节点中展开你的计算群集节点。
1. 右键单击要编辑的运行配置，然后选择“编辑运行配置”。
1. 此时会在编辑器中打开一个用于你的运行配置的配置文件。 如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。

### <a name="delete-run-configuration"></a>删除运行配置

1. 展开包含你的工作区的订阅节点。
1. 展开你的工作区节点。
1. 在“计算群集”节点中展开感兴趣的计算群集节点。
1. 右键单击要编辑的运行配置，然后选择“删除运行配置”。

## <a name="models"></a>模型

有关详细信息，请参阅[模型](concept-azure-machine-learning-architecture.md#models)

### <a name="register-model"></a>注册模型

1. 展开包含你的工作区的订阅节点。
1. 展开你的工作区节点。
1. 右键单击“模型”节点，然后选择“注册模型”。
1. 在提示中执行以下操作：
    1. 为你的模型提供一个名称
    1. 选择你的模型是文件还是文件夹。
    1. 在本地电脑中找到该模型。
    1. 编辑器中的模型配置文件。 如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。

### <a name="view-model-properties"></a>查看模型属性

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“模型”节点。
1. 右键单击要查看其属性的模型，然后选择“查看模型属性”。 此时会在编辑器中打开一个文件，其中包含你的模型属性。

### <a name="download-model"></a>下载模型

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“模型”节点。
1. 右键单击要下载的模型，然后选择“下载模型文件”。

### <a name="delete-a-model"></a>删除模型

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“模型”节点。
1. 右键单击要删除的模型，然后选择“删除模型”。

## <a name="endpoints"></a>终结点

VS Code 扩展支持以下部署目标：

- Azure 容器实例
- Azure Kubernetes 服务

有关详细信息，请参阅 [Web 服务终结点](concept-azure-machine-learning-architecture.md#web-service-endpoint)。

### <a name="create-deployments"></a>创建部署

> [!NOTE]
> 创建部署的操作目前仅适用于 Conda 环境。

1. 展开包含你的工作区的订阅节点。
1. 展开你的工作区节点。
1. 右键单击“终结点”节点并选择“部署服务”。
1. 在提示中执行以下操作：
    1. 选择是要使用已注册的模型还是使用本地模型文件。
    1. 选择你的模型
    1. 选择要将你的模型部署到的部署目标。
    1. 为你的模型提供一个名称。
    1. 提供对模型进行评分时要运行的脚本。
    1. 提供 Conda 依赖项文件。
    1. 此时会在编辑器中显示你的部署的配置文件。 如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。

> [!NOTE]
> 也可在“模型”节点中右键单击已注册的模型，然后选择“从已注册的模型部署服务”。

### <a name="delete-deployments"></a>删除部署

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“终结点”节点。
1. 右键单击要删除的部署，然后选择“删除服务”。
1. 此时会出现一个提示，要求你确认是否要删除该服务。 选择“确定”。

### <a name="manage-deployments"></a>管理部署

除了创建和删除部署之外，还可以查看和编辑与部署关联的设置。

1. 展开包含你的工作区的订阅节点。
1. 在工作区中展开“终结点”节点。
1. 右键单击要管理的部署：
    - 若要编辑设置，请选择“编辑服务”。
        - 此时会在编辑器中显示你的部署的配置文件。 如果对配置满意，请选择“保存并继续”或打开 VS Code 命令面板（“视图”>“命令面板”），然后键入“Azure ML:保存并继续”。
    - 若要查看部署配置设置，请选择“查看服务属性”。

## <a name="next-steps"></a>后续步骤

使用 VS Code 扩展[训练图像分类模型](tutorial-train-deploy-image-classification-model-vscode.md)。
