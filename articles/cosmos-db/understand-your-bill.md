---
title: 了解 Azure Cosmos DB 帐单
description: 本文通过一些示例介绍如何了解 Azure Cosmos DB 帐单。
author: rimman
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 05/21/2019
ms.author: rimman
ms.reviewer: sngun
ms.openlocfilehash: d30cd92456218284326263d7bd3c9c7820fa435c
ms.sourcegitcommit: 6a42dd4b746f3e6de69f7ad0107cc7ad654e39ae
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/07/2019
ms.locfileid: "67621286"
---
# <a name="understand-your-azure-cosmos-db-bill"></a>了解 Azure Cosmos DB 帐单

Azure Cosmos DB 是完全托管的云原生数据库服务，仅针对预配的吞吐量和消耗的存储收费，从而简化计费。 与本地或 IaaS 托管的替代方案相比，无需额外的许可费、硬件、使用成本或设施成本。 若想使用 Azure Cosmos DB 的多区域功能，与现有本地或 IaaS 解决方案相比，数据库服务可显着降低成本。

使用 Azure Cosmos DB 时，需根据预配的吞吐量和使用的存储按小时付费。 对于预配的吞吐量，计费单位为每小时 100 RU/秒，每小时收取 0.008 美元（假定为标准公开定价），请参阅[定价页面](https://azure.microsoft.com/pricing/details/cosmos-db/)。 对于消耗的存储，每月每 1 GB 存储收取 0.25 美元，请参阅[定价页面](https://azure.microsoft.com/pricing/details/cosmos-db/)。 

本文通过一些示例来帮助你了解每月帐单上的详细信息。 若存在以下情况，则示例中显示的数字可能会有所不同：Azure Cosmos 容器预配的吞吐量不同；容器跨多个区域；或在一个月内在不同时期运行。

>!注意：时钟小时，不 60 分钟持续时间的任何部分是计费。

## <a name="billing-examples"></a>计费示例

### <a name="billing-example---throughput-on-a-container-full-month"></a>计费示例 – 容器上的吞吐量（整月）

* 假设在容器上配置了 1,000 RU/秒的吞吐量，且在该月总共存在 24 小时* 30 天 = 720 小时。  

* 容器每小时存在的 1,000 RU/秒是 10 个每小时 100 RU/秒（即 1,000/100 = 10）。 

* 以每小时 10 个单位乘以成本 0.008 美元（每小时每 100 RU/秒）= 每小时 0.08 美元。 

* 以每小时 0.08 美元乘以当月的小时数，即 0.08 * 24 小时 * 30 天 = 当月 57.60 美元。  

* 月度总帐单将显示 7,200 个单位（100 个 RU），费用为 57.60 美元。

### <a name="billing-example---throughput-on-a-container-partial-month"></a>计费示例 – 容器上的吞吐量（不足一个月）

* 假设创建一个预配吞吐量为 2,500 RU/秒的容器。容器在一个月内存在 24 小时（例如，在创建容器后 24 小时将其删除）。  

* 则帐单上会显示 600 个单位（2,500 RU/秒/100 RU/秒/单位* 24小时）。 费用为 4.80 美元（600 单位 * 0.008 美元/单位）。

* 当月总帐单将为 4.80 美元。

### <a name="billing-rate-if-storage-size-changes"></a>存储大小变化时的计费率

存储容量按一个月内每小时的最大数据存储量（以 GB 为单位）计费。 例如，如果前半个月使用了 100 GB 的存储空间，而后半个月使用了 50 GB 的存储空间，则该月将按 75 GB 的等效存储空间进行计费。

### <a name="billing-rate-when-container-or-a-set-of-containers-are-active-for-less-than-an-hour"></a>容器或一组容器活动时间在一小时内的计费率

将对容器或数据库存在的每小时按统一费率进行收费，而无论使用量是多少，也无论容器或数据库使用时间是否不足一个小时。 例如，如果创建一个容器或数据库，然后在 5 分钟后删除它，那么帐单显示 1 个小时的费用。

### <a name="billing-rate-when-throughput-on-a-container-or-database-scales-updown"></a>容器或数据库上的吞吐量扩展/缩减时的计费率

如果在上午 9:30 将预配的吞吐量从 400 RU/秒增加到 1,000 RU/秒，然后在上午 10:45 将预配的吞吐量重新减少到 400 RU/秒，则将收取两小时 1,000 RU/秒的费用。 

如果在上午 9:30 将某个容器或一组容器的预配吞吐量从 100K RU/秒增加到 200K RU/秒，然后在上午 10:45 将预配的吞吐量重新减少到 100K RU/秒，则将收取两小时 200K RU/秒的费用。

### <a name="billing-example-multiple-containers-each-with-dedicated-provisioned-throughput-mode"></a>计费示例：多个容器，每个容器都采用专用的预配吞吐量模式

* 如果在美国东部 2 区域创建包含两个容器的 Azure Cosmos 帐户，并且这两个容器分别预配了 500 RU/秒和 700 RU/秒的吞吐量，则预配的总吞吐量将为 1,200 RU/秒。  

* 需支付 1,200/100 * 0.008 美元 = 0.096 美元/小时。 

* 如果需要更改吞吐量，且每个容器的容量增加了 500 RU/秒，同时还以 20,000 RU/秒创建了新的无限容器，则预配的总体容量为 22,200 RU/秒（1,000 RU/秒 + 1,200 RU/秒 + 20,000 RU/秒）。  

* 此时需支付 0.008 美元  x 222 =  1.776 美元/小时。 

* 假设一个月为 720 小时（24 小时 * 30 天），如果 500 小时的预配吞吐量为 1,200 RU/秒，其余 220 小时的预配吞吐量为 22,200 RU/秒，则月度帐单将显示：500 x 0.096 美元/小时 + 220 x 1.776 美元/小时 = 438.72 美元/月。

![专用吞吐量计费示例](./media/understand-your-bill/bill-example1.png)

### <a name="billing-example-containers-with-shared-throughput-mode"></a>计费示例：具有共享吞吐量模式的容器

* 如果在美国东部 2 区域创建包含两个 Azure Cosmos 数据库（其中含有一组在数据库级别共享吞吐量的容器）的 Azure Cosmos 帐户，并且这两个容器分别预配了 50K RU/秒和 70K RU/秒的吞吐量，则预配的总吞吐量将为 120K RU/秒。  

* 需支付 1200 x 0.008 美元 = 9.60 美元/小时。 

* 如果需要更改吞吐量，且每个数据库的预配吞吐量增加了 10K RU/秒，同时还向第一个数据库添加了新容器，共享吞吐量数据库的专用吞吐量模式为 15K RU /秒，则预配的总体容量为 155K RU/秒（60K RU/秒 + 80K RU/秒 + 15K RU/秒）。  

* 此时需支付：1,550 * 0.008 美元 = 12.40 美元/小时。  

* 假设一个月为 720 小时，如果 300 小时的预配吞吐量为 120K RU/秒，其余 420 小时的预配吞吐量为 155K RU/秒，则月度帐单将显示：300 x 9.60 美元/小时 + 420 x 12.40 美元/小时 = 2,880 美元 + 5,208 美元 = 8,088 美元/月。 

![共享吞吐量计费示例](./media/understand-your-bill/bill-example2.png)

## <a name="billing-examples-with-geo-replication-and-multi-master"></a>采用异地复制和多主数据库的计费示例  

可随时随地向 Azure Cosmos DB 数据库帐户添加/删除 Azure 区域。 对于为不同 Azure Cosmos DB 数据库和容器配置的吞吐量，可在与 Azure Cosmos 数据库帐户关联的每个 Azure 区域中保留这些吞吐量。 如果在 Azure Cosmos 数据库帐户（按小时配置）中的所有数据库和容器中配置的总预配吞吐量（RU /秒）为 T，而与数据库帐户关联的 Azure 区域数为 N，则对于 Azure Cosmos 数据库帐户而言，在给定时间内（小时）总预配吞吐量分别为：(a) 配置了单个写入区域时，总吞吐量 = T x N RU/秒；(b) 配置了所有能够处理写入的区域时，总吞吐量 = T x (N + 1) RU/每秒。 预配吞吐量（单个写入区域）每 100 RU/秒的费用为 0.008 美元/小时，对于多个写入区域（配置多主数据库），每 100 RU/秒的费用为 0.016 美元/小时（参阅[定价页面](https://azure.microsoft.com/pricing/details/cosmos-db/)）。 无论是单个写入区域还是多个写入区域，Azure Cosmos DB 都支持从任何区域读取数据。

### <a name="billing-example-multi-region-azure-cosmos-account-single-region-writes"></a>计费示例：多区域 Azure Cosmos 帐户，单个区域写入

假定存在位于美国西部的 Azure Cosmos 容器。 创建容器时，指定的吞吐量为 10K RU/秒，本月可存储 1 TB 的数据。 假定向 Azure Cosmos 帐户添加 3 个区域（美国东部、北欧和东亚），每个区域都具有相同的存储和吞吐量。 则月度帐单为（假定一个月 30 天）。 帐单情况如下： 

|**Item** |**使用情况（月）** |**费率** |**每月成本** |
|---------|---------|---------|-------|
|美国西部容器的吞吐量帐单      | 10K RU/秒 * 24 * 30    |100 RU/秒每小时 0.008 美元   |576 美元|
|3 个其他区域（美国东部、北欧和东亚）的吞吐量帐单       | 3 * 10K RU/秒 * 24 * 30    |100 RU/秒每小时 0.008 美元  |1,728 美元|
|美国西部容器的存储帐单      | 250 GB    |0\.25 美元/GB  |62.50 美元|
|3 个其他区域（美国东部、北欧和东亚）的存储帐单      | 3 * 250 GB    |0\.25 美元/GB  |187.50 美元|
|**总计**     |     |  |**2,554 美元**|

此外，假定每月从美国西部的容器中导出 100 GB 数据，将数据复制到美国东部、北欧和东亚。  则需要按数据传输速率为导出部分付费。

### <a name="billing-example-multi-region-azure-cosmos-account-multi-region-writes"></a>计费示例：多区域 Azure Cosmos 帐户，多个区域写入

假定创建位于美国西部的 Azure Cosmos 容器。 创建容器时，指定的吞吐量为 10K RU/秒，本月可存储 1 TB 的数据。 假定添加 3 个区域（美国东部、北欧和东亚），每个区域的存储和吞吐量相同，并且希望能够通过 Azure Cosmos 对所有关联区域中的容器进行写入。 则月度帐单（假定一个月 30 天）情况如下：

|**Item** |**使用情况（月）**|**费率** |**每月成本** |
|---------|---------|---------|-------|
|美国西部容器的吞吐量帐单（所有区域都可写入）       | 10K RU/秒 * 24 * 30    |100 RU/秒每小时 0.016 美元    |1,152 美元 |
|3 个其他区域（美国东部、北欧和东亚）的吞吐量帐单（所有区域都可写入）        | (3 + 1) * 10K RU/秒 * 24 * 30    |100 RU/秒每小时 0.016 美元   |4,608 美元 |
|美国西部容器的存储帐单      | 250 GB    |0\.25 美元/GB  |62.50 美元|
|3 个其他区域（美国东部、北欧和东亚）的存储帐单      | 3 * 250 GB    |0\.25 美元/GB  |187.50 美元|
|**总计**     |     |  |**6,010 美元**|

此外，假定每月从美国西部的容器中导出 100 GB 数据，将数据复制到美国东部、北欧和东亚。  则需要按数据传输速率为导出部分付费。

### <a name="billing-example-azure-cosmos-account-with-multi-master-database-level-throughput-including-dedicated-throughput-mode-for-some-containers"></a>计费示例：包含多主数据库的 Azure Cosmos 帐户，数据库级别的吞吐量包括某些容器的专用吞吐量模式

我们来看看以下示例，示例中包含一个多区域 Azure Cosmos 帐户，其中所有区域都可写入（多主数据库配置）。 为简单起见，假定存储大小保持不变，且不会更改，此处不考虑存储大小，从而简化示例。 本月的预配吞吐量变化如下（假定一月为 30 天或 720 小时）： 

[0-100 小时]：  

* 创建了包含 3 个区域的 Azure Cosmos 帐户（美国西部、美国东部和北欧），其中所有地区都可写入 

* 创建共享吞吐量为 10K RU/秒的数据库 (D1) 

* 创建共享吞吐量为 30k RU/秒的数据库 (D2)  

* 创建专用吞吐量为 20K RU/秒的容器 (C1) 

[101-200 小时]：  

* 将数据库 (D1) 纵向扩展到 50K RU/秒 

* 将数据库 (D2) 纵向扩展到 70K RU/秒  

* 删除容器 (C1)  

[201-300 小时]：  

* 再次创建专用吞吐量为 20K RU/秒的容器 (C1) 

[301-400 小时]：  

* 从 Azure Cosmos 帐户中删除 1 个区域（可写入的区域的数量现为 2 个） 

* 将数据库 (D1) 缩小到 10K RU/秒 

* 将数据库 (D2) 纵向扩展到 80K RU/秒  

* 再次删除容器 (C1) 

[401-500 小时]：  

* 将数据库 (D2) 缩小到 10K RU/秒  

* 再次创建专用吞吐量为 20K RU/秒的容器 (C1) 

[501-700 小时]：  

* 将数据库 (D1) 纵向扩展到 20K RU/秒  

* 将数据库 (D2) 纵向扩展到 100K RU/秒  

* 再次删除容器 (C1)  

[701-720 小时]：  

* 将数据库 (D2) 缩小到 50K RU/秒  

下图直观地呈现了本月 720 小时内总预配吞吐量的变化情况： 

![真实示例](./media/understand-your-bill/bill-example3.png)

将按以下方式计算月度总帐单（假定一个月为 30 天/720 小时）：

|**小时数**  |**RU/秒** |**Item** |**使用时间（小时）** |**成本** |
|---------|---------|---------|-------|-------|
|[0-100] |D1:10K <br/>D2:30K <br/>C1:20K |美国西部容器的吞吐量帐单（所有区域都可写入）  | `D1: 10K RU/sec/100 * $0.016 * 100 hours = $160` <br/>`D2: 30 K RU/sec/100 * $0.016 * 100 hours = $480` <br/>`C1: 20 K RU/sec/100 *$0.016 * 100 hours = $320` |960 美元  |
| | |2 个其他区域的吞吐量帐单：美国东部、北欧（所有区域都可写入）  |`(2 + 1) * (60 K RU/sec /100 * $0.016) * 100 hours = $2,880`  |2,880 美元  |
|[101-200] |D1:50K <br/>D2:70K <br/>C1: -- |美国西部容器的吞吐量帐单（所有区域都可写入）  |`D1: 50 K RU/sec/100 * $0.016 * 100 hours = $800` <br/>`D2: 70 K RU/sec/100 * $0.016 * 100 hours = $1,120` |1920 美元  |
| | |2 个其他区域的吞吐量帐单：美国东部、北欧（所有区域都可写入）  |`(2 + 1) * (120 K RU/sec /100 * $0.016) * 100 hours = $5,760`  |5,760 美元  |
|[201-300]  |D1:50K <br/>D2:70K <br/>C1:20K |美国西部容器的吞吐量帐单（所有区域都可写入）  |`D1: 50 K RU/sec/100 * $0.016 * 100 hours = $800` <br/>`D2: 70 K RU/sec/100 * $0.016 * 100 hours = $1,120` <br/>`C1: 20 K RU/sec/100 *$0.016 * 100 hours = $320` |$2,240  |
| | |2 个其他区域的吞吐量帐单：美国东部、北欧（所有区域都可写入）  |`(2 + 1) * (140 K RU/sec /100 * $0.016-) * 100 hours = $6,720` |6,720 美元 |
|[301-400] |D1:10K <br/>D2:80K <br/>C1: -- |美国西部容器的吞吐量帐单（所有区域都可写入）  |`D1: 10K RU/sec/100 * $0.016 * 100 hours = $160` <br/>`D2: 80 K RU/sec/100 * $0.016 * 100 hours = $1,280`  |1,440 美元   |
| | |2 个其他区域的吞吐量帐单：美国东部、北欧（所有区域都可写入）  |`(1 + 1) * (90 K RU/sec /100 * $0.016) * 100 hours = $2,880`  |2,880 美元  |
|[401-500] |D1:10K <br>D2:10K <br>C1:20K |美国西部容器的吞吐量帐单（所有区域都可写入）  |`D1: 10K RU/sec/100 * $0.016 * 100 hours = $160` <br>`D2: 10K RU/sec/100 * $0.016 * 100 hours = $160` <br>`C1: 20 K RU/sec/100 *$0.016 * 100 hours = $320` |640 美元  |
| | |2 个其他区域的吞吐量帐单：美国东部、北欧（所有区域都可写入）  |`(1 + 1) * (40 K RU/sec /100 * $0.016) * 100 hours = $1,280`  |1,280 美元  |
|[501-700] |D1:20K <br>D2:100K <br>C1: -- |美国西部容器的吞吐量帐单（所有区域都可写入）  |`D1: 20 K RU/sec/100 * $0.016 * 200 hours = $640` <br>`D2: 100 K RU/sec/100 * $0.016 * 200 hours = $3,200` |3,840 美元  |
| | |2 个其他区域的吞吐量帐单：美国东部、北欧（所有区域都可写入）  |`(1 + 1) * (120 K RU/sec /100 * $0.016) * 200 hours = $1,280`  |7,680 美元  |
|[701-720] |D1:20K <br/>D2:50K <br/>C1: -- |美国西部容器的吞吐量帐单（所有区域都可写入）  |`D1: 20 K RU/sec/100 *$0.016 * 20 hours = $64` <br/>`D2: 50 K RU/sec/100 *$0.016 * 20 hours = $160` |224 美元  |
| | |2 个其他区域的吞吐量帐单：美国东部、北欧（所有区域都可写入）  |`(1 + 1) * (70 K RU/sec /100 * $0.016) * 20 hours = $448`  |224 美元  |
|| |**每月总成本**  | |**38,688 美元**   |

## <a name="proactively-estimating-your-monthly-bill"></a>主动估算每月帐单  

我们来看看另一个示例，介绍希望在月末之前主动估算帐单的情况。 可按如下方式估算帐单：

|**存储成本** | |
|----|----|
|平均记录大小 (KB) |1 |
|记录数  |100,000,000  |
|总存储 (GB)  |100 |
|每 GB 的月度成本  |0\.25 美元  |
|预期的月度存储成本   |25.00 美元  |

<br>

|**吞吐量成本** | | | |
|----|----|----|----|
|操作类型| 请求数/秒| 平均RU/请求| 所需 RU|
|写入| 100 | 5 | 500|
|读取| 400| 1| 400|

总 RU/秒：500 + 400 = 900；每小时成本：900/100 * 0.008 美元 = 0.072 美元；预期的月度吞吐量成本（假定一月 31 天）：0.072 美元 * 24 * 31 = 53.57 美元

**每月总成本**

月度总成本 = 月度存储成本 + 月度吞吐量成本；月度总成本 = 25.00 美元 + 53.57 美元 = 78.57 美元

区域不同定价可能有所不同。  有关最新定价，请参阅[定价页面](https://azure.microsoft.com/pricing/details/cosmos-db/)。

## <a name="billing-with-azure-cosmos-db-reserved-capacity"></a>通过 Azure Cosmos DB 保留容量计费

使用 Azure Cosmos DB 保留容量可提前购买预配吞吐量（保留容量或预留），这些吞吐量可用于所有 Azure 区域中的所有 Azure Cosmos DB 数据库和容器（适用于任何 API 或数据模型）。 因为预配的吞吐量价格因区域而异，所以可将保留容量视为以折扣价购买的货币额度，并可根据各区域相应价格针对预配吞吐量来使用该额度。 例如，假定有一个 Azure Cosmos 帐户，其中包含配置有 50K RU/秒吞吐量的单个容器，并且全局复制了 2 个区域 – 美国东部和日本东部。 如果选择即用即付，则需支付：  

* 在美国东部：对于 50K RU /秒，该地区的费率为每 100 RU/秒 0.008 美元 

* 在日本东部：对于 50K RU /秒，该地区的费率为每 100 RU/秒 0.009 美元

总帐单（无保留容量）将为（假定一月为 30 天或 720 小时）： 

|**区域**| **每 100 RU/秒每小时的价格**|**单位数（RU/秒）**|**计费数量（每小时）**| **计费数量（每月）**|
|----|----|----|----|----|
|East US|0\.008 美元 |50K|4 美元|2,880 美元 |
|日本东部|0\.009 美元 |50K| 4\.50 美元 |3,240 美元 |
|总计|||8\.50 美元|6,120 美元 |

我们假定已改为购买保留容量。 可以 56,064 美元的价格购买 100K RU/秒的保留容量，为期一年（享受 20％折扣），或以每小时 6.40 美元的价格购买。 请参阅[定价页面](https://azure.microsoft.com/pricing/details/cosmos-db/)上的保留容量定价。  

* 吞吐量成本（即用即付）：100,000 RU/秒/100 * 0.008 美元/小时 * 8760 小时/年 = 70,080 美元 

* 吞吐量成本（含保留容量）70,080 美元可享受 20% 的折扣 = 56,064 美元 

实际购买的是每小时 8 美元的信用额度，以每小时 6.40 美元的价格购买采用美国东部定价的 100 K RU/秒。 然后可以在全球任何 Azure 区域中根据为订阅设定的相应区域定价为预配的吞吐量容量消费此预付的保留吞吐量（按小时计）。 在本例中，在美国东部和日本东部各预配 50K RU/秒，那每小时能使用价值 8.00 美元的预配吞吐量，且平均每小时将支付 0.50 美元（或 360 美元/月）。 

|**区域**| **每 100 RU/秒每小时的价格**|**单位数（RU/秒）**| **计费数量（每小时）**| **计费数量（每月）**|
|----|----|----|----|----|
|East US|0\.008 美元 |50K|4 美元|2,880 美元 |
|日本东部|0\.009 美元 |50K| 4\.50 美元 |3,240 美元 |
|||即用即付|8\.50 美元|6120 美元|
|购买的保留容量|0\.0064 美元（20% 折扣） |100 RU/秒或预先购买的 8 美元的容量 |-8 美元|-5,760 美元 |
|净计费|||0\.50 美元 |360 美元 |

## <a name="next-steps"></a>后续步骤

接下来，可通过以下文章了解 Azure Cosmos DB 中的成本优化：

* 详细了解 [Cosmos DB 定价模型如何对客户而言更具经济效益](total-cost-ownership.md)
* 详细了解[开发和测试优化](optimize-dev-test.md)
* 详细了解如何[优化吞吐量成本](optimize-cost-throughput.md)
* 详细了解如何[优化存储成本](optimize-cost-storage.md)
* 详细了解如何[优化读取和写入成本](optimize-cost-reads-writes.md)
* 详细了解如何[优化查询成本](optimize-cost-queries.md)
* 详细了解[优化多区域 Azure Cosmos 帐户的成本](optimize-cost-regions.md)
